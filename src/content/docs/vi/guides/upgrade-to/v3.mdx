---
title: NÃ¢ng cáº¥p lÃªn Astro v3
description: CÃ¡ch nÃ¢ng cáº¥p dá»± Ã¡n cá»§a báº¡n lÃªn phiÃªn báº£n má»›i nháº¥t cá»§a Astro (v3.0).
sidebar:
  label: v3.0
i18nReady: true
---
import { Steps } from '@astrojs/starlight/components';
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';

HÆ°á»›ng dáº«n nÃ y sáº½ giÃºp báº¡n di chuyá»ƒn tá»« Astro v2 sang Astro v3.

Cáº§n nÃ¢ng cáº¥p dá»± Ã¡n cÅ© hÆ¡n lÃªn v2? Xem [hÆ°á»›ng dáº«n di chuyá»ƒn cÅ© hÆ¡n](/vi/guides/upgrade-to/v2/) cá»§a chÃºng tÃ´i.

## NÃ¢ng cáº¥p Astro

Cáº­p nháº­t phiÃªn báº£n Astro cá»§a dá»± Ã¡n báº¡n lÃªn phiÃªn báº£n má»›i nháº¥t báº±ng trÃ¬nh quáº£n lÃ½ gÃ³i. Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng cÃ¡c integration cá»§a Astro, hÃ£y cáº­p nháº­t chÃºng lÃªn phiÃªn báº£n má»›i nháº¥t.

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  # NÃ¢ng cáº¥p lÃªn Astro v3.x
  npm install astro@latest

  # VÃ­ dá»¥: nÃ¢ng cáº¥p React vÃ  Tailwind integration
  npm install @astrojs/react@latest @astrojs/tailwind@latest
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  # NÃ¢ng cáº¥p lÃªn Astro v3.x
  pnpm add astro@latest

  # VÃ­ dá»¥: nÃ¢ng cáº¥p React vÃ  Tailwind integration
  pnpm add @astrojs/react@latest @astrojs/tailwind@latest
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  # NÃ¢ng cáº¥p lÃªn Astro v3.x
  yarn add astro@latest

  # VÃ­ dá»¥: nÃ¢ng cáº¥p React vÃ  Tailwind integration
  yarn add @astrojs/react@latest @astrojs/tailwind@latest
  ```
  </Fragment>
</PackageManagerTabs>

:::note[Cáº§n tiáº¿p tá»¥c?]
Sau khi nÃ¢ng cáº¥p Astro lÃªn phiÃªn báº£n má»›i nháº¥t, báº¡n cÃ³ thá»ƒ khÃ´ng cáº§n thay Ä‘á»•i gÃ¬ trong dá»± Ã¡n cá»§a mÃ¬nh cáº£!

NhÆ°ng náº¿u báº¡n gáº·p lá»—i hoáº·c hÃ nh vi báº¥t thÆ°á»ng, vui lÃ²ng kiá»ƒm tra bÃªn dÆ°á»›i nhá»¯ng gÃ¬ Ä‘Ã£ thay Ä‘á»•i cÃ³ thá»ƒ cáº§n cáº­p nháº­t trong dá»± Ã¡n cá»§a báº¡n.
:::

## Astro v3.0 Experimental Flags ÄÃ£ Bá»‹ XÃ³a

XÃ³a cÃ¡c experimental flags sau khá»i `astro.config.mjs`:

```js del={5-8}
// astro.config.mjs
import { defineConfig } from 'astro/config';

export default defineConfig({
  experimental: {
    assets: true,
    viewTransitions: true,
  },
})
```

CÃ¡c tÃ­nh nÄƒng nÃ y hiá»‡n cÃ³ sáºµn theo máº·c Ä‘á»‹nh:

- View Transitions cho cÃ¡c hiá»‡u á»©ng chuyá»ƒn trang vÃ  persistent islands. Xem [thay Ä‘á»•i phÃ¡ vá»¡ API view transitions vÃ  lá»i khuyÃªn nÃ¢ng cáº¥p](#nang-cap-view-transitions-len-v3) náº¿u báº¡n Ä‘ang sá»­ dá»¥ng experimental flag nÃ y.
- API dá»‹ch vá»¥ hÃ¬nh áº£nh má»›i `astro:assets` Ä‘á»ƒ sá»­ dá»¥ng hÃ¬nh áº£nh trong Astro, bao gá»“m component `<Image />` má»›i vÃ  hÃ m `getImage()`. Vui lÃ²ng Ä‘á»c [lá»i khuyÃªn nÃ¢ng cáº¥p hÃ¬nh áº£nh chi tiáº¿t](#nang-cap-hinh-anh-len-v3) **báº¥t ká»ƒ báº¡n cÃ³ sá»­ dá»¥ng experimental flag nÃ y hay khÃ´ng** Ä‘á»ƒ xem Ä‘iá»u nÃ y cÃ³ thá»ƒ áº£nh hÆ°á»Ÿng Ä‘áº¿n dá»± Ã¡n cá»§a báº¡n nhÆ° tháº¿ nÃ o.

Äá»c thÃªm vá» hai tÃ­nh nÄƒng thÃº vá»‹ nÃ y vÃ  nhiá»u hÆ¡n ná»¯a trong [bÃ i Ä‘Äƒng Blog 3.0](https://astro.build/blog/astro-3/)!

## Astro v3.0 Breaking Changes

Astro v3.0 bao gá»“m má»™t sá»‘ thay Ä‘á»•i phÃ¡ vá»¡, cÅ©ng nhÆ° viá»‡c loáº¡i bá» má»™t sá»‘ tÃ­nh nÄƒng Ä‘Ã£ deprecated trÆ°á»›c Ä‘Ã³. Náº¿u dá»± Ã¡n cá»§a báº¡n khÃ´ng hoáº¡t Ä‘á»™ng nhÆ° mong Ä‘á»£i sau khi nÃ¢ng cáº¥p lÃªn v3.0, hÃ£y kiá»ƒm tra hÆ°á»›ng dáº«n nÃ y Ä‘á»ƒ biáº¿t tá»•ng quan vá» táº¥t cáº£ cÃ¡c thay Ä‘á»•i phÃ¡ vá»¡ vÃ  hÆ°á»›ng dáº«n cÃ¡ch cáº­p nháº­t codebase cá»§a báº¡n.

Xem [changelog](https://github.com/withastro/astro/blob/main/packages/astro/CHANGELOG.md) Ä‘á»ƒ biáº¿t ghi chÃº phÃ¡t hÃ nh Ä‘áº§y Ä‘á»§.

### ÄÃ£ xÃ³a: Há»— trá»£ Node 16

Node 16 dá»± kiáº¿n Ä‘áº¡t End of Life vÃ o thÃ¡ng 9 nÄƒm 2023.

Astro v3.0 loáº¡i bá» hoÃ n toÃ n há»— trá»£ Node 16 Ä‘á»ƒ táº¥t cáº£ ngÆ°á»i dÃ¹ng Astro cÃ³ thá»ƒ táº­n dá»¥ng cÃ¡c tÃ­nh nÄƒng hiá»‡n Ä‘áº¡i hÆ¡n cá»§a Node.

#### TÃ´i nÃªn lÃ m gÃ¬?

Kiá»ƒm tra xem cáº£ mÃ´i trÆ°á»ng phÃ¡t triá»ƒn vÃ  mÃ´i trÆ°á»ng triá»ƒn khai cá»§a báº¡n Ä‘á»u Ä‘ang sá»­ dá»¥ng **Node `18.14.1` trá»Ÿ lÃªn**.

<Steps>
1. Kiá»ƒm tra phiÃªn báº£n Node cá»¥c bá»™ cá»§a báº¡n báº±ng:

    ```sh
    node -v
    ```

2. Kiá»ƒm tra tÃ i liá»‡u cá»§a [mÃ´i trÆ°á»ng triá»ƒn khai](/vi/guides/deploy/) Ä‘á»ƒ xÃ¡c minh ráº±ng há» há»— trá»£ Node 18.

    Báº¡n cÃ³ thá»ƒ chá»‰ Ä‘á»‹nh Node `18.14.1` cho dá»± Ã¡n Astro cá»§a mÃ¬nh trong cÃ i Ä‘áº·t cáº¥u hÃ¬nh dashboard hoáº·c file `.nvmrc`.

    ```bash title=".nvmrc"
    18.14.1
    ```
</Steps>

### ÄÃ£ xÃ³a: Há»— trá»£ TypeScript 4

Trong Astro v2.x, cÃ¡c preset `tsconfig.json` bao gá»“m há»— trá»£ cho cáº£ TypeScript 4.x vÃ  5.x.

Astro v3.0 cáº­p nháº­t cÃ¡c preset `tsconfig.json` Ä‘á»ƒ chá»‰ há»— trá»£ TypeScript 5.x. Astro hiá»‡n giáº£ Ä‘á»‹nh ráº±ng báº¡n sá»­ dá»¥ng TypeScript 5.0 (thÃ¡ng 3 nÄƒm 2023), hoáº·c editor cá»§a báº¡n bao gá»“m nÃ³ (vÃ­ dá»¥: VS Code 1.77).

#### TÃ´i nÃªn lÃ m gÃ¬?

Náº¿u báº¡n Ä‘Ã£ cÃ i Ä‘áº·t TypeScript cá»¥c bá»™, hÃ£y cáº­p nháº­t Ã­t nháº¥t lÃªn v5.0.

```bash
npm install typescript@latest --save-dev
```

### ÄÃ£ xÃ³a: `@astrojs/image`

Trong Astro v2.x, Astro cung cáº¥p integration hÃ¬nh áº£nh chÃ­nh thá»©c bao gá»“m cÃ¡c component Astro `<Image />` vÃ  `<Picture />`.

Astro v3.0 loáº¡i bá» hoÃ n toÃ n integration nÃ y khá»i codebase. Giáº£i phÃ¡p má»›i cá»§a Astro cho hÃ¬nh áº£nh lÃ  API dá»‹ch vá»¥ hÃ¬nh áº£nh tÃ­ch há»£p: `astro:assets`.

#### TÃ´i nÃªn lÃ m gÃ¬?

XÃ³a integration `@astrojs/image` khá»i dá»± Ã¡n cá»§a báº¡n. Báº¡n sáº½ cáº§n khÃ´ng chá»‰ gá»¡ cÃ i Ä‘áº·t integration mÃ  cÃ²n cáº­p nháº­t hoáº·c xÃ³a báº¥t ká»³ cÃ¢u lá»‡nh import nÃ o vÃ  cÃ¡c component `<Image />` vÃ  `<Picture />` hiá»‡n cÃ³. Báº¡n cÅ©ng cÃ³ thá»ƒ cáº§n cáº¥u hÃ¬nh dá»‹ch vá»¥ xá»­ lÃ½ hÃ¬nh áº£nh máº·c Ä‘á»‹nh Æ°a thÃ­ch.

Báº¡n sáº½ tÃ¬m tháº¥y [hÆ°á»›ng dáº«n tá»«ng bÆ°á»›c Ä‘áº§y Ä‘á»§ Ä‘á»ƒ xÃ³a integration hÃ¬nh áº£nh cÅ©](#xoa-astrojsimage) trong hÆ°á»›ng dáº«n HÃ¬nh áº£nh cá»§a chÃºng tÃ´i.

Di chuyá»ƒn sang `astro:assets` cÅ©ng sáº½ mang láº¡i má»™t sá»‘ tÃ¹y chá»n vÃ  tÃ­nh nÄƒng hÃ¬nh áº£nh má»›i mÃ  báº¡n cÃ³ thá»ƒ muá»‘n sá»­ dá»¥ng ngay bÃ¢y giá». Vui lÃ²ng xem [Lá»i khuyÃªn NÃ¢ng cáº¥p HÃ¬nh áº£nh v3.0](#nang-cap-hinh-anh-len-v3) Ä‘áº§y Ä‘á»§ Ä‘á»ƒ biáº¿t chi tiáº¿t!

```js del={3,7}
// astro.config.mjs
import { defineConfig } from 'astro/config';
import image from '@astrojs/image';

export default defineConfig({
  integrations: [
    image(),
  ]
})
```

### ÄÃ£ xÃ³a: Component `<Markdown />`

Trong Astro v1.x, Astro deprecated component `<Markdown />` vÃ  chuyá»ƒn nÃ³ sang package bÃªn ngoÃ i.

Astro v3.0 loáº¡i bá» hoÃ n toÃ n package `@astrojs/markdown-component`. Component `<Markdown />` cá»§a Astro sáº½ khÃ´ng cÃ²n hoáº¡t Ä‘á»™ng trong dá»± Ã¡n cá»§a báº¡n.

#### TÃ´i nÃªn lÃ m gÃ¬?

XÃ³a táº¥t cáº£ cÃ¡c instance cá»§a `@astrojs/markdown-component`.

```astro del={2} title="src/components/MyAstroComponent.astro"
---
import Markdown from '@astrojs/markdown-component';
---
```

Äá»ƒ tiáº¿p tá»¥c sá»­ dá»¥ng component `<Markdown />` tÆ°Æ¡ng tá»± trong code cá»§a báº¡n, hÃ£y xem xÃ©t sá»­ dá»¥ng [cÃ¡c integration cá»™ng Ä‘á»“ng](https://astro.build/integrations/) nhÆ° [`astro-remote`](https://github.com/natemoo-re/astro-remote). Äáº£m báº£o cáº­p nháº­t cÃ¡c import vÃ  attribute component `<Markdown />` cá»§a báº¡n theo cáº§n thiáº¿t, theo tÃ i liá»‡u cá»§a chÃ­nh integration Ä‘Ã³.

Náº¿u khÃ´ng, hÃ£y xÃ³a táº¥t cáº£ cÃ¡c tham chiáº¿u Ä‘áº¿n viá»‡c import component `<Markdown />` cá»§a Astro vÃ  chÃ­nh component Ä‘Ã³ trong cÃ¡c file `.astro` cá»§a báº¡n. Báº¡n sáº½ cáº§n viáº¿t láº¡i ná»™i dung cá»§a mÃ¬nh dÆ°á»›i dáº¡ng HTML trá»±c tiáº¿p hoáº·c [import Markdown](/vi/guides/markdown-content/#importing-markdown) tá»« file `.md`.

### ÄÃ£ xÃ³a: APIs deprecated 1.x

Trong Astro v1.x, Astro deprecated cÃ¡c cÃ i Ä‘áº·t cáº¥u hÃ¬nh ban Ä‘áº§u cá»§a chÃºng tÃ´i cÅ©ng nhÆ° há»— trá»£ `<style global>` vÃ  `<script hoist>`. Tuy nhiÃªn, nhá»¯ng Ä‘iá»u nÃ y váº«n Ä‘Æ°á»£c há»— trá»£ Ä‘á»ƒ tÆ°Æ¡ng thÃ­ch ngÆ°á»£c.

Astro v3.0 loáº¡i bá» hoÃ n toÃ n cÃ¡c API deprecated nÃ y. CÃ¡c [cÃ i Ä‘áº·t cáº¥u hÃ¬nh](/vi/reference/configuration-reference/) Ä‘Æ°á»£c há»— trá»£ chÃ­nh thá»©c vÃ  cÃº phÃ¡p `<style is:global>` vÃ  `<script>` hiá»‡n Ä‘áº¡i nÃªn Ä‘Æ°á»£c sá»­ dá»¥ng thay tháº¿.

#### TÃ´i nÃªn lÃ m gÃ¬?

Náº¿u báº¡n tiáº¿p tá»¥c sá»­ dá»¥ng cÃ¡c API v1.x, hÃ£y sá»­ dá»¥ng cÃ¡c API má»›i cho tá»«ng tÃ­nh nÄƒng thay tháº¿:

- TÃ¹y chá»n config deprecated: Xem [hÆ°á»›ng dáº«n di chuyá»ƒn 0.26](/vi/guides/upgrade-to/v1/#new-configuration-api)
- CÃ¡c loáº¡i attribute script/style deprecated: Xem [hÆ°á»›ng dáº«n di chuyá»ƒn 0.26](/vi/guides/upgrade-to/v1/#new-default-script-behavior)

### ÄÃ£ xÃ³a: Shims má»™t pháº§n cho Web APIs trong server code

Trong Astro v2.x, Astro cung cáº¥p cÃ¡c shims má»™t pháº§n cho Web APIs nhÆ° `document` hoáº·c `localStorage` trong code server-rendered. Nhá»¯ng shims nÃ y thÆ°á»ng khÃ´ng Ä‘áº§y Ä‘á»§ vÃ  khÃ´ng Ä‘Ã¡ng tin cáº­y.

Astro v3.0 loáº¡i bá» hoÃ n toÃ n nhá»¯ng shims má»™t pháº§n nÃ y. Web APIs khÃ´ng cÃ²n kháº£ dá»¥ng trong code server-rendered.

#### TÃ´i nÃªn lÃ m gÃ¬?

Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng Web APIs trong cÃ¡c component server-rendered, báº¡n sáº½ cáº§n lÃ m cho viá»‡c sá»­ dá»¥ng cÃ¡c API Ä‘Ã³ cÃ³ Ä‘iá»u kiá»‡n hoáº·c sá»­ dá»¥ng [client directive `client:only`](/vi/reference/directives-reference/#clientonly).

### ÄÃ£ xÃ³a: `image` tá»« `astro:content` trong schema content collections

Trong Astro v2.x, API content collections deprecated export `image` tá»« `astro:content` Ä‘á»ƒ sá»­ dá»¥ng trong schemas content collections cá»§a báº¡n.

Astro v3.0 loáº¡i bá» hoÃ n toÃ n export nÃ y.

#### TÃ´i nÃªn lÃ m gÃ¬?

Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng `image()` deprecated tá»« `astro:content`, hÃ£y xÃ³a nÃ³ vÃ¬ nÃ³ khÃ´ng cÃ²n tá»“n táº¡i. XÃ¡c thá»±c hÃ¬nh áº£nh thÃ´ng qua [helper `image` tá»« `schema`](#cap-nhat-schemas-content-collections) thay tháº¿:

```ts title="src/content/config.ts" del={1} ins={2} "({ image })"
import { defineCollection, z, image } from "astro:content";
import { defineCollection, z } from "astro:content";

defineCollection({
  schema: ({ image }) =>
    z.object({
      image: image(),
   }),
});
```

### ÄÃ£ xÃ³a: TÃªn theme Shiki trÆ°á»›c 0.14

Trong Astro v2.x, má»™t sá»‘ tÃªn theme Shiki Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»•i tÃªn, nhÆ°ng tÃªn gá»‘c Ä‘Æ°á»£c giá»¯ láº¡i Ä‘á»ƒ tÆ°Æ¡ng thÃ­ch ngÆ°á»£c.

Astro v3.0 loáº¡i bá» tÃªn gá»‘c á»§ng há»™ tÃªn theme Ä‘Ã£ Ä‘á»•i tÃªn.

#### TÃ´i nÃªn lÃ m gÃ¬?

Náº¿u dá»± Ã¡n cá»§a báº¡n sá»­ dá»¥ng báº¥t ká»³ theme nÃ o dÆ°á»›i Ä‘Ã¢y, hÃ£y Ä‘á»•i tÃªn chÃºng thÃ nh tÃªn Ä‘Ã£ cáº­p nháº­t:

- `material-darker` -> `material-theme-darker`
- `material-default` -> `material-theme`
- `material-lighter` -> `material-theme-lighter`
- `material-ocean` -> `material-theme-ocean`
- `material-palenight` -> `material-theme-palenight`

### ÄÃ£ xÃ³a: TÃ­nh nÄƒng `class:list`

Trong Astro v2.x, [directive `class:list`](/vi/reference/directives-reference/#classlist) sá»­ dá»¥ng implementation tÃ¹y chá»‰nh láº¥y cáº£m há»©ng tá»« [`clsx`](https://github.com/lukeed/clsx) vá»›i má»™t vÃ i tÃ­nh nÄƒng bá»• sung nhÆ° deduplication vÃ  há»— trá»£ `Set`.

Astro v3.0 hiá»‡n sá»­ dá»¥ng `clsx` trá»±c tiáº¿p cho `class:list`, khÃ´ng há»— trá»£ deduplication hoáº·c giÃ¡ trá»‹ `Set`.

#### TÃ´i nÃªn lÃ m gÃ¬?

Thay tháº¿ báº¥t ká»³ pháº§n tá»­ `Set` nÃ o Ä‘Æ°á»£c truyá»n cho directive `class:list` báº±ng `Array` thuáº§n tÃºy.

```astro title="src/components/MyAstroComponent.astro" del={4} ins={5}
<Component class:list={[
  'a',
  'b',
  new Set(['c', 'd'])
  ['c', 'd']
]} />
```

### ÄÃ£ xÃ³a: Truyá»n `class:list` nhÆ° má»™t prop

Trong Astro v2.x, [giÃ¡ trá»‹ `class:list`](/vi/reference/directives-reference/#classlist) Ä‘Æ°á»£c gá»­i Ä‘áº¿n cÃ¡c component thÃ´ng qua [`Astro.props['class:list']`](/vi/reference/api-reference/#props).

Astro v3.0 chuáº©n hÃ³a giÃ¡ trá»‹ `class:list` thÃ nh string trÆ°á»›c khi Ä‘Æ°á»£c gá»­i Ä‘áº¿n components thÃ´ng qua `Astro.props['class']`

#### TÃ´i nÃªn lÃ m gÃ¬?

XÃ³a báº¥t ká»³ code nÃ o mong Ä‘á»£i nháº­n prop `class:list`.

```astro title="src/components/MyAstroComponent.astro" del={2,3,7} ins={4,8} "classList" "'class:list': classList"
---
import { clsx } from 'clsx';
const { class: className, 'class:list': classList } = Astro.props;
const { class: className } = Astro.props;
---
<div
  class:list={[className, classList]}
  class:list={[className]}
/>
```

### ÄÃ£ xÃ³a: Chuyá»ƒn Ä‘á»•i kebab-case cho biáº¿n CSS camelCase

Trong Astro v2.x, [biáº¿n CSS](/vi/guides/styling/#css-variables) camelCase Ä‘Æ°á»£c truyá»n cho attribute `style` Ä‘Æ°á»£c render dÆ°á»›i dáº¡ng cáº£ camelCase (nhÆ° Ä‘Ã£ viáº¿t) vÃ  kebab-case (Ä‘Æ°á»£c giá»¯ láº¡i Ä‘á»ƒ tÆ°Æ¡ng thÃ­ch ngÆ°á»£c).

Astro v3.0 loáº¡i bá» chuyá»ƒn Ä‘á»•i kebab-case cho cÃ¡c tÃªn biáº¿n CSS camelCase nÃ y, vÃ  chá»‰ biáº¿n CSS camelCase gá»‘c Ä‘Æ°á»£c render.

```astro "my-value"
---
// src/components/MyAstroComponent.astro
const myValue = "red"
---
<!-- input -->
<div style={{ "--myValue": myValue }}></div>

<!-- output (Astro 2.x) -->
<div style="--my-value:var(--myValue);--myValue:red"></div>
<!-- output (Astro 3.0) -->
<div style="--myValue:red"></div>
```

#### TÃ´i nÃªn lÃ m gÃ¬?

Náº¿u báº¡n Ä‘ang dá»±a vÃ o Astro Ä‘á»ƒ chuyá»ƒn Ä‘á»•i kebab-case trong styles cá»§a mÃ¬nh, hÃ£y cáº­p nháº­t styles hiá»‡n cÃ³ cá»§a báº¡n thÃ nh camelCase Ä‘á»ƒ trÃ¡nh thiáº¿u styles. VÃ­ dá»¥:

```astro del={3} ins={4} title="src/components/MyAstroComponent.astro"
<style>
  div {
   color: var(--my-value);
   color: var(--myValue);
  }
</style>
```

### ÄÃ£ xÃ³a: Tá»± Ä‘á»™ng flatten return value cá»§a `getStaticPaths()`

Trong Astro v2.x, return value cá»§a [`getStaticPaths()`](/vi/reference/routing-reference/#getstaticpaths) Ä‘Æ°á»£c tá»± Ä‘á»™ng flatten Ä‘á»ƒ cho phÃ©p báº¡n tráº£ vá» array cá»§a arrays mÃ  khÃ´ng cÃ³ lá»—i.

Astro v3.0 loáº¡i bá» tá»± Ä‘á»™ng flatten result cá»§a `getStaticPaths()`.

#### TÃ´i nÃªn lÃ m gÃ¬?

Náº¿u báº¡n Ä‘ang tráº£ vá» array cá»§a arrays thay vÃ¬ array cá»§a _objects_ (nhÆ° mong Ä‘á»£i), `.flatMap` vÃ  `.flat` hiá»‡n nÃªn Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Ä‘áº£m báº£o ráº±ng báº¡n Ä‘ang tráº£ vá» flat array.

[ThÃ´ng bÃ¡o lá»—i cho biáº¿t return value cá»§a `getStaticPath()` pháº£i lÃ  array cá»§a objects](/vi/reference/errors/invalid-get-static-paths-entry/#what-went-wrong) sáº½ Ä‘Æ°á»£c cung cáº¥p náº¿u báº¡n cáº§n cáº­p nháº­t code cá»§a mÃ¬nh.

### ÄÃ£ di chuyá»ƒn: `astro check` hiá»‡n yÃªu cáº§u package bÃªn ngoÃ i

Trong Astro v2.x, [`astro check`](/vi/reference/cli-reference/#astro-check) Ä‘Æ°á»£c bao gá»“m trong Astro theo máº·c Ä‘á»‹nh, vÃ  cÃ¡c dependencies cá»§a nÃ³ Ä‘Æ°á»£c bundle trong Astro. Äiá»u nÃ y cÃ³ nghÄ©a lÃ  package lá»›n hÆ¡n báº¥t ká»ƒ báº¡n cÃ³ bao giá» sá»­ dá»¥ng `astro check` hay khÃ´ng. Äiá»u nÃ y cÅ©ng ngÄƒn báº¡n kiá»ƒm soÃ¡t phiÃªn báº£n TypeScript vÃ  Astro Language Server Ä‘á»ƒ sá»­ dá»¥ng.

Astro v3.0 di chuyá»ƒn lá»‡nh `astro check` ra khá»i Astro core vÃ  hiá»‡n yÃªu cáº§u package bÃªn ngoÃ i `@astrojs/check`. NgoÃ i ra, báº¡n pháº£i cÃ i Ä‘áº·t `typescript` trong dá»± Ã¡n Ä‘á»ƒ sá»­ dá»¥ng lá»‡nh `astro check`.

#### TÃ´i nÃªn lÃ m gÃ¬?

Cháº¡y lá»‡nh `astro check` sau khi nÃ¢ng cáº¥p lÃªn Astro v3.0 vÃ  lÃ m theo cÃ¡c lá»i nháº¯c Ä‘á»ƒ cÃ i Ä‘áº·t cÃ¡c dependencies cáº§n thiáº¿t, hoáº·c cÃ i Ä‘áº·t thá»§ cÃ´ng `@astrojs/check` vÃ  `typescript` vÃ o dá»± Ã¡n cá»§a báº¡n.

### Deprecated: `build.excludeMiddleware` vÃ  `build.split`

Trong Astro v2.x, `build.excludeMiddleware` vÃ  `build.split` Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ thay Ä‘á»•i cÃ¡ch cÃ¡c file cá»¥ thá»ƒ Ä‘Æ°á»£c emit khi sá»­ dá»¥ng adapter trong cháº¿ Ä‘á»™ SSR.

Astro v3.0 thay tháº¿ cÃ¡c tÃ¹y chá»n build config nÃ y báº±ng [tÃ¹y chá»n cáº¥u hÃ¬nh adapter SSR](/vi/guides/integrations-guide/#official-integrations) má»›i Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c tÃ¡c vá»¥ tÆ°Æ¡ng tá»±: `edgeMiddleware` vÃ  `functionPerRoute`.

#### TÃ´i nÃªn lÃ m gÃ¬?

Cáº­p nháº­t file cáº¥u hÃ¬nh Astro Ä‘á»ƒ hiá»‡n sá»­ dá»¥ng cÃ¡c tÃ¹y chá»n má»›i **trong cáº¥u hÃ¬nh adapter** trá»±c tiáº¿p.

```js title="astro.config.mjs" del={5-7} ins={9}
import { defineConfig } from "astro/config";
import vercel from "@astrojs/vercel/serverless";

export default defineConfig({
    build: {
      excludeMiddleware: true
    },
    adapter: vercel({
      edgeMiddleware: true
    }),
});
```

```js title="astro.config.mjs" del={5-7} ins={9}
import { defineConfig } from "astro/config";
import netlify from "@astrojs/netlify/functions";

export default defineConfig({
     build: {
        split: true
     },
     adapter: netlify({
        functionPerRoute: true
     }),
});
```

### Deprecated: `markdown.drafts`

Trong Astro v2.x, cáº¥u hÃ¬nh `markdown.drafts` cho phÃ©p báº¡n cÃ³ cÃ¡c trang draft cÃ³ sáºµn khi cháº¡y dev server, nhÆ°ng khÃ´ng Ä‘Æ°á»£c build trong production.

Astro v3.0 deprecated tÃ­nh nÄƒng nÃ y á»§ng há»™ phÆ°Æ¡ng phÃ¡p content collections Ä‘á»ƒ xá»­ lÃ½ cÃ¡c trang draft báº±ng cÃ¡ch filter thá»§ cÃ´ng thay tháº¿, Ä‘iá»u nÃ y mang láº¡i nhiá»u kiá»ƒm soÃ¡t hÆ¡n Ä‘á»‘i vá»›i tÃ­nh nÄƒng nÃ y.

#### TÃ´i nÃªn lÃ m gÃ¬?

Äá»ƒ tiáº¿p tá»¥c Ä‘Ã¡nh dáº¥u má»™t sá»‘ trang trong dá»± Ã¡n cá»§a báº¡n nhÆ° drafts, [di chuyá»ƒn sang content collections](/vi/guides/content-collections/) vÃ  filter thá»§ cÃ´ng cÃ¡c trang cÃ³ thuá»™c tÃ­nh frontmatter `draft: true` thay tháº¿.

### Deprecated: Tráº£ vá» object Ä‘Æ¡n giáº£n trong endpoints

Trong Astro v2.x, endpoints cÃ³ thá»ƒ tráº£ vá» object Ä‘Æ¡n giáº£n, sáº½ Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i thÃ nh JSON response.

Astro v3.0 deprecated hÃ nh vi nÃ y á»§ng há»™ viá»‡c tráº£ vá» object `Response` trá»±c tiáº¿p.

#### TÃ´i nÃªn lÃ m gÃ¬?

Cáº­p nháº­t endpoints cá»§a báº¡n Ä‘á»ƒ tráº£ vá» object `Response` trá»±c tiáº¿p.

```ts title="endpoint.json.ts" del={2} ins={3}
export async function GET() {
  return { body: { "title": "Bob's blog" }};
  return new Response(JSON.stringify({ "title": "Bob's blog" }));
}
```

Náº¿u báº¡n thá»±c sá»± cáº§n giá»¯ format trÆ°á»›c Ä‘Ã³, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng object `ResponseWithEncoding` nhÆ°ng sáº½ bá»‹ deprecated trong tÆ°Æ¡ng lai.

```ts title="endpoint.json.ts" del={2} ins={3}
export async function GET() {
  return { body: { "title": "Bob's blog" } };
  return new ResponseWithEncoding({ body: { "title": "Bob's blog" }});
}
```

### ÄÃ£ thay Ä‘á»•i máº·c Ä‘á»‹nh: `verbatimModuleSyntax` trong tsconfig.json presets

Trong Astro v2.x, cÃ i Ä‘áº·t [`verbatimModuleSyntax`](https://www.typescriptlang.org/tsconfig#verbatimModuleSyntax) máº·c Ä‘á»‹nh táº¯t, vá»›i TypeScript 4.x tÆ°Æ¡ng Ä‘Æ°Æ¡ng `importsNotUsedAsValues` Ä‘Æ°á»£c báº­t trong preset `strict`.

Trong Astro v3.0, `verbatimModuleSyntax` Ä‘Æ°á»£c báº­t trong má»i preset.

#### TÃ´i nÃªn lÃ m gÃ¬?

TÃ¹y chá»n nÃ y yÃªu cáº§u types Ä‘Æ°á»£c import báº±ng cÃº phÃ¡p `import type`.

```astro title="src/components/MyAstroComponent.astro" "type"
---
import { type CollectionEntry, getEntry } from "astro:content";
---
```

Máº·c dÃ¹ chÃºng tÃ´i khuyáº¿n nghá»‹ giá»¯ nÃ³ báº­t vÃ  thá»±c hiá»‡n Ä‘Ãºng cÃ¡ch import types cá»§a báº¡n vá»›i `type` (nhÆ° hiá»ƒn thá»‹ á»Ÿ trÃªn), báº¡n cÃ³ thá»ƒ vÃ´ hiá»‡u hÃ³a nÃ³ báº±ng cÃ¡ch Ä‘áº·t `verbatimModuleSyntax: false` trong file `tsconfig.json` cá»§a báº¡n náº¿u nÃ³ gÃ¢y ra báº¥t ká»³ váº¥n Ä‘á» nÃ o.

```json title="tsconfig.json" "false"
{
  "compilerOptions": {
    "verbatimModuleSyntax": false
  }
}
```

### ÄÃ£ thay Ä‘á»•i máº·c Ä‘á»‹nh: port `3000`

Trong Astro v2.x, Astro cháº¡y trÃªn port `3000` theo máº·c Ä‘á»‹nh.

Astro v3.0 thay Ä‘á»•i [port máº·c Ä‘á»‹nh](/vi/reference/cli-reference/#--port-number) thÃ nh `4321`. ğŸš€

#### TÃ´i nÃªn lÃ m gÃ¬?

Cáº­p nháº­t báº¥t ká»³ tham chiáº¿u hiá»‡n cÃ³ nÃ o Ä‘áº¿n `localhost:3000`, vÃ­ dá»¥ trong tests hoáº·c trong `README` cá»§a báº¡n, Ä‘á»ƒ pháº£n Ã¡nh port má»›i `localhost:4321`.

### ÄÃ£ thay Ä‘á»•i máº·c Ä‘á»‹nh: import.meta.env.BASE_URL `trailingSlash`

Trong Astro v2.x, `import.meta.env.BASE_URL` ná»‘i cÃ i Ä‘áº·t [`base`](/vi/reference/configuration-reference/#base) cá»§a báº¡n vá»›i [trailingSlash](/vi/reference/configuration-reference/#trailingslash) theo máº·c Ä‘á»‹nh. `trailingSlash: "ignore"` cÅ©ng ná»‘i trailing slash.

Astro v3.0 khÃ´ng cÃ²n ná»‘i `import.meta.env.BASE_URL` vá»›i trailing slash theo máº·c Ä‘á»‹nh, cÅ©ng khÃ´ng khi `trailingSlash: "ignore"` Ä‘Æ°á»£c Ä‘áº·t. (HÃ nh vi hiá»‡n cÃ³ cá»§a `base` káº¿t há»£p vá»›i `trailingSlash: "always"` hoáº·c `trailingSlash: "never"` khÃ´ng thay Ä‘á»•i.)

#### TÃ´i nÃªn lÃ m gÃ¬?

Náº¿u `base` cá»§a báº¡n Ä‘Ã£ cÃ³ trailing slash, khÃ´ng cáº§n thay Ä‘á»•i.

Náº¿u `base` cá»§a báº¡n khÃ´ng cÃ³ trailing slash, hÃ£y thÃªm má»™t náº¿u báº¡n muá»‘n giá»¯ hÃ nh vi máº·c Ä‘á»‹nh trÆ°á»›c Ä‘Ã³ (hoáº·c `trailingSlash: "ignore"`):

```js title="astro.config.mjs" del={4} ins={5}
import { defineConfig } from "astro/config";

export default defineConfig({
  base: 'my-base',
  base: 'my-base/',
});
```

### ÄÃ£ thay Ä‘á»•i máº·c Ä‘á»‹nh: `compressHTML`

Trong Astro v2.x, Astro chá»‰ nÃ©n HTML emit cá»§a báº¡n khi [`compressHTML`](/vi/reference/configuration-reference/#compresshtml) Ä‘Æ°á»£c Ä‘áº·t rÃµ rÃ ng thÃ nh `true`. GiÃ¡ trá»‹ máº·c Ä‘á»‹nh lÃ  `false`.

Astro v3.0 hiá»‡n nÃ©n HTML emit theo máº·c Ä‘á»‹nh.

#### TÃ´i nÃªn lÃ m gÃ¬?

Báº¡n hiá»‡n cÃ³ thá»ƒ xÃ³a `compressHTML: true` khá»i cáº¥u hÃ¬nh cá»§a mÃ¬nh vÃ¬ Ä‘Ã¢y lÃ  hÃ nh vi máº·c Ä‘á»‹nh má»›i.

```js title="astro.config.mjs" del={4}
import { defineConfig } from "astro/config";

export default defineConfig({
  compressHTML: true
})
```

Báº¡n hiá»‡n pháº£i Ä‘áº·t `compressHTML: false` Ä‘á»ƒ opt out khá»i nÃ©n HTML.

### ÄÃ£ thay Ä‘á»•i máº·c Ä‘á»‹nh: `scopedStyleStrategy`

Trong Astro v2.x, giÃ¡ trá»‹ máº·c Ä‘á»‹nh cá»§a [`scopedStyleStrategy`](/vi/reference/configuration-reference/#scopedstylestrategy) lÃ  `"where"`.

Astro v3.0 giá»›i thiá»‡u giÃ¡ trá»‹ máº·c Ä‘á»‹nh má»›i: `"attribute"`. Theo máº·c Ä‘á»‹nh, styles hiá»‡n Ä‘Æ°á»£c Ã¡p dá»¥ng báº±ng attributes `data-*`.

#### TÃ´i nÃªn lÃ m gÃ¬?

Äá»ƒ giá»¯ láº¡i [style scoping](/vi/guides/styling/#scoped-styles) hiá»‡n táº¡i cá»§a dá»± Ã¡n, hÃ£y cáº­p nháº­t file cáº¥u hÃ¬nh thÃ nh giÃ¡ trá»‹ máº·c Ä‘á»‹nh trÆ°á»›c Ä‘Ã³:

```js title="astro.config.mjs" ins={4}
import { defineConfig } from "astro/config";

export default defineConfig({
  scopedStyleStrategy: "where"
})
```

### ÄÃ£ thay Ä‘á»•i máº·c Ä‘á»‹nh: `inlineStyleSheets`

Trong Astro v2.x, táº¥t cáº£ stylesheets cá»§a dá»± Ã¡n Ä‘Æ°á»£c gá»­i dÆ°á»›i dáº¡ng link tags theo máº·c Ä‘á»‹nh. Báº¡n cÃ³ thá»ƒ opt in Ä‘á»ƒ inline chÃºng vÃ o tags `<style>` má»—i láº§n vá»›i `"always"`, hoáº·c Ä‘á»ƒ inline chá»‰ cÃ¡c stylesheets dÆ°á»›i kÃ­ch thÆ°á»›c nháº¥t Ä‘á»‹nh vá»›i `"auto"` báº±ng cÃ¡ch Ä‘áº·t cáº¥u hÃ¬nh [`build.inlineStylesheets`](/vi/reference/configuration-reference/#buildinlinestylesheets). CÃ i Ä‘áº·t máº·c Ä‘á»‹nh lÃ  `"never"`.

Astro v3.0 thay Ä‘á»•i giÃ¡ trá»‹ máº·c Ä‘á»‹nh cá»§a `inlineStylesheets` thÃ nh `"auto"`. Stylesheets nhá» hÆ¡n `ViteConfig.build.assetsInlineLimit` (máº·c Ä‘á»‹nh: 4kb) Ä‘Æ°á»£c inline theo máº·c Ä‘á»‹nh. Náº¿u khÃ´ng, styles dá»± Ã¡n Ä‘Æ°á»£c gá»­i trong stylesheets bÃªn ngoÃ i.

#### TÃ´i nÃªn lÃ m gÃ¬?
Náº¿u báº¡n muá»‘n giá»¯ hÃ nh vi hiá»‡n táº¡i cá»§a dá»± Ã¡n, hÃ£y Ä‘áº·t `build.inlineStylesheets` thÃ nh máº·c Ä‘á»‹nh trÆ°á»›c Ä‘Ã³, `"never"`:

```js title="astro.config.mjs" ins={4-6}
import { defineConfig } from "astro/config";

export default defineConfig({
	 build: {
    inlineStylesheets: "never"
  }
})
```

### ÄÃ£ thay Ä‘á»•i máº·c Ä‘á»‹nh: image service

Trong Astro v2.x, Squoosh lÃ  [dá»‹ch vá»¥ xá»­ lÃ½ hÃ¬nh áº£nh máº·c Ä‘á»‹nh](/vi/guides/images/#default-image-service).

Astro v3.0 hiá»‡n bao gá»“m Sharp lÃ m dá»‹ch vá»¥ xá»­ lÃ½ hÃ¬nh áº£nh máº·c Ä‘á»‹nh vÃ  thay vÃ o Ä‘Ã³ cung cáº¥p tÃ¹y chá»n cáº¥u hÃ¬nh Ä‘á»ƒ sá»­ dá»¥ng Squoosh.

#### TÃ´i nÃªn lÃ m gÃ¬?

:::note
Khi sá»­ dá»¥ng [strict package manager](https://pnpm.io/pnpm-vs-npm#npms-flat-tree) nhÆ° `pnpm`, báº¡n cÃ³ thá»ƒ cáº§n cÃ i Ä‘áº·t thá»§ cÃ´ng Sharp vÃ o dá»± Ã¡n cá»§a mÃ¬nh máº·c dÃ¹ nÃ³ lÃ  dependency cá»§a Astro:

```bash
pnpm add sharp
```
:::

Náº¿u báº¡n muá»‘n tiáº¿p tá»¥c sá»­ dá»¥ng Squoosh Ä‘á»ƒ chuyá»ƒn Ä‘á»•i hÃ¬nh áº£nh cá»§a mÃ¬nh, hÃ£y cáº­p nháº­t config cá»§a báº¡n vá»›i nhá»¯ng Ä‘iá»u sau:

```ts title="astro.config.mjs" ins={4-6}
import { defineConfig, squooshImageService } from "astro/config";

export default defineConfig({
  image: {
    service: squooshImageService(),
  }
})
```

### ÄÃ£ thay Ä‘á»•i: Case cá»§a HTTP request methods

Trong Astro v2.x, [HTTP request methods](/vi/guides/endpoints/#http-methods) Ä‘Æ°á»£c viáº¿t báº±ng tÃªn hÃ m chá»¯ thÆ°á»ng: `get`, `post`, `put`, `all`, vÃ  `del`.

Astro v3.0 sá»­ dá»¥ng tÃªn hÃ m chá»¯ hoa, bao gá»“m `DELETE` thay vÃ¬ `del`.

#### TÃ´i nÃªn lÃ m gÃ¬?

Äá»•i tÃªn táº¥t cáº£ cÃ¡c hÃ m thÃ nh tÆ°Æ¡ng Ä‘Æ°Æ¡ng chá»¯ hoa:

- `get` thÃ nh `GET`
- `post` thÃ nh `POST`
- `put` thÃ nh `PUT`
- `all` thÃ nh `ALL`
- `del` thÃ nh `DELETE`

```diff lang="js" title="endpoint.ts"
-export function get() {
+export function GET() {
    return new Response(JSON.stringify({ "title": "Bob's blog" }));
}
```

### ÄÃ£ thay Ä‘á»•i: Cáº¥u hÃ¬nh multiple JSX framework

Trong Astro v2.x, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng [multiple JSX framework integrations](/vi/guides/integrations-guide/#official-integrations) (React, Solid, Preact) trong cÃ¹ng má»™t dá»± Ã¡n mÃ  khÃ´ng cáº§n xÃ¡c Ä‘á»‹nh file nÃ o thuá»™c vá» framework nÃ o.

Astro v3.0 hiá»‡n yÃªu cáº§u báº¡n chá»‰ Ä‘á»‹nh framework nÃ o sá»­ dá»¥ng cho files cá»§a mÃ¬nh vá»›i cÃ¡c tÃ¹y chá»n cáº¥u hÃ¬nh integration `include` vÃ  `exclude` má»›i khi báº¡n cÃ³ nhiá»u JSX framework integrations Ä‘Æ°á»£c cÃ i Ä‘áº·t. Äiá»u nÃ y cho phÃ©p Astro há»— trá»£ tá»‘t hÆ¡n viá»‡c sá»­ dá»¥ng single-framework, cÅ©ng nhÆ° cÃ¡c tÃ­nh nÄƒng nÃ¢ng cao nhÆ° React Fast Refresh.

#### TÃ´i nÃªn lÃ m gÃ¬?

Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng nhiá»u JSX frameworks trong cÃ¹ng má»™t dá»± Ã¡n, hÃ£y Ä‘áº·t `include` (vÃ  tÃ¹y chá»n `exclude`) thÃ nh array cá»§a files vÃ /hoáº·c folders. Wildcards cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ bao gá»“m nhiá»u file paths.

ChÃºng tÃ´i khuyáº¿n nghá»‹ Ä‘áº·t cÃ¡c component framework chung trong cÃ¹ng má»™t folder (vÃ­ dá»¥: `/components/react/` vÃ  `/components/solid/`) Ä‘á»ƒ lÃ m cho viá»‡c chá»‰ Ä‘á»‹nh includes cá»§a báº¡n dá»… dÃ ng hÆ¡n, nhÆ°ng Ä‘iá»u nÃ y khÃ´ng báº¯t buá»™c:

```js ins={13,16,19}
import { defineConfig } from 'astro/config';
import preact from '@astrojs/preact';
import react from '@astrojs/react';
import svelte from '@astrojs/svelte';
import vue from '@astrojs/vue';
import solid from '@astrojs/solid-js';

export default defineConfig({
  // Báº­t nhiá»u frameworks Ä‘á»ƒ há»— trá»£ táº¥t cáº£ cÃ¡c loáº¡i components khÃ¡c nhau.
  // KhÃ´ng cáº§n `include` náº¿u báº¡n chá»‰ sá»­ dá»¥ng má»™t framework duy nháº¥t!
  integrations: [
    preact({
      include: ['**/preact/*']
    }),
    react({
      include: ['**/react/*']
    }),
    solid({
      include: ['**/solid/*'],
    }),
  ]
});
```

### ÄÃ£ thay Ä‘á»•i: `Astro.cookies.get(key)` cÃ³ thá»ƒ tráº£ vá» `undefined`

Trong Astro v2.x, `Astro.cookies.get(key)` sáº½ luÃ´n tráº£ vá» object `AstroCookie`, ngay cáº£ khi cookie khÃ´ng tá»“n táº¡i. Äá»ƒ kiá»ƒm tra sá»± tá»“n táº¡i cá»§a nÃ³, báº¡n cáº§n sá»­ dá»¥ng `Astro.cookies.has(key)`.

Astro v3.0 tráº£ vá» `undefined` cho `Astro.cookies.get(key)` náº¿u cookie khÃ´ng tá»“n táº¡i.

#### TÃ´i nÃªn lÃ m gÃ¬?

Thay Ä‘á»•i nÃ y sáº½ khÃ´ng phÃ¡ vá»¡ báº¥t ká»³ code nÃ o kiá»ƒm tra sá»± tá»“n táº¡i cá»§a object `Astro.cookie` trÆ°á»›c khi sá»­ dá»¥ng `Astro.cookies.get(key)`, nhÆ°ng hiá»‡n khÃ´ng cÃ²n cáº§n thiáº¿t.

Báº¡n cÃ³ thá»ƒ xÃ³a báº¥t ká»³ code nÃ o sá»­ dá»¥ng `has()` Ä‘á»ƒ kiá»ƒm tra xem giÃ¡ trá»‹ cá»§a `Astro.cookies` cÃ³ pháº£i lÃ  `undefined`:

```js del={1-3} ins={5-7}
if (Astro.cookies.has(id)) {
  const id = Astro.cookies.get(id)!;
}

const id = Astro.cookies.get(id);
if (id) {
}
```

### ÄÃ£ thay Ä‘á»•i: Cháº¡y Astro CLI theo chÆ°Æ¡ng trÃ¬nh

Trong Astro v2.x, entrypoint package `"astro"` exported vÃ  cháº¡y Astro CLI trá»±c tiáº¿p. KhÃ´ng khuyáº¿n nghá»‹ cháº¡y Astro theo cÃ¡ch nÃ y trong thá»±c táº¿.

Astro v3.0 loáº¡i bá» CLI khá»i entrypoint, vÃ  exports má»™t táº­p há»£p cÃ¡c experimental JavaScript APIs má»›i, bao gá»“m `dev()`, `build()`, `preview()`, vÃ  `sync()`.

#### TÃ´i nÃªn lÃ m gÃ¬?

Äá»ƒ [cháº¡y Astro CLI theo chÆ°Æ¡ng trÃ¬nh](/vi/reference/programmatic-reference/), hÃ£y sá»­ dá»¥ng cÃ¡c experimental JavaScript APIs má»›i:

```js
import { dev, build } from "astro";

// Khá»Ÿi Ä‘á»™ng Astro dev server
const devServer = await dev();
await devServer.stop();

// Build dá»± Ã¡n Astro cá»§a báº¡n
await build();
```

### ÄÃ£ thay Ä‘á»•i: ÄÆ°á»ng dáº«n export entry point cá»§a internal Astro API

Trong Astro v2.x, báº¡n cÃ³ thá»ƒ import internal Astro APIs tá»« `astro/internal/*` vÃ  `astro/runtime/server/*`.

Astro v3.0 loáº¡i bá» hai entry points á»§ng há»™ entrypoint `astro/runtime/*` hiá»‡n cÃ³. NgoÃ i ra, export `astro/compiler-runtime` má»›i Ä‘Ã£ Ä‘Æ°á»£c thÃªm cho compiler-specific runtime code.

#### TÃ´i nÃªn lÃ m gÃ¬?

ÄÃ¢y lÃ  entry points cho internal API cá»§a Astro vÃ  khÃ´ng nÃªn áº£nh hÆ°á»Ÿng Ä‘áº¿n dá»± Ã¡n cá»§a báº¡n. NhÆ°ng náº¿u báº¡n sá»­ dá»¥ng cÃ¡c entrypoints nÃ y, hÃ£y cáº­p nháº­t nhÆ° hiá»ƒn thá»‹ bÃªn dÆ°á»›i:

```js del={1,4,10} ins={2,5,11}
import 'astro/internal/index.js';
import 'astro/runtime/server/index.js';

import 'astro/server/index.js';
import 'astro/runtime/server/index.js';
```

```js ins={5} del={4}
import { transform } from '@astrojs/compiler';

const result = await transform(source, {
  internalURL: 'astro/runtime/server/index.js',
  internalURL: 'astro/compiler-runtime',
  // ...
});
```

## NÃ¢ng cáº¥p TÃ­nh nÄƒng

### NÃ¢ng cáº¥p hÃ¬nh áº£nh lÃªn v3

`astro:assets` khÃ´ng cÃ²n Ä‘áº±ng sau experimental flag trong Astro v3.0.

`<Image />` hiá»‡n lÃ  component tÃ­ch há»£p vÃ  integration `@astrojs/image` trÆ°á»›c Ä‘Ã³ Ä‘Ã£ Ä‘Æ°á»£c loáº¡i bá».

Nhá»¯ng thay Ä‘á»•i nÃ y vÃ  cÃ¡c thay Ä‘á»•i Ä‘i kÃ¨m khÃ¡c Ä‘á»ƒ sá»­ dá»¥ng hÃ¬nh áº£nh trong Astro cÃ³ thá»ƒ gÃ¢y ra má»™t sá»‘ breaking changes khi báº¡n nÃ¢ng cáº¥p dá»± Ã¡n Astro tá»« phiÃªn báº£n trÆ°á»›c Ä‘Ã³.

Vui lÃ²ng lÃ m theo hÆ°á»›ng dáº«n bÃªn dÆ°á»›i nhÆ° thÃ­ch há»£p Ä‘á»ƒ nÃ¢ng cáº¥p dá»± Ã¡n Astro v2.x lÃªn v3.0.

#### NÃ¢ng cáº¥p tá»« `experimental.assets`

Náº¿u báº¡n Ä‘Ã£ báº­t experimental flag cho `astro:assets` trÆ°á»›c Ä‘Ã³, báº¡n sáº½ cáº§n cáº­p nháº­t dá»± Ã¡n cho Astro v3.0 hiá»‡n bao gá»“m cÃ¡c tÃ­nh nÄƒng assets theo máº·c Ä‘á»‹nh.

##### XÃ³a flag `experimental.assets`

XÃ³a experimental flag:

```js title="astro.config.mjs" del={4-6}
import { defineConfig } from 'astro/config';

export default defineConfig({
  experimental: {
    assets: true
  }
});
```

Náº¿u cáº§n, cÅ©ng cáº­p nháº­t file `src/env.d.ts` cá»§a báº¡n Ä‘á»ƒ thay tháº¿ tham chiáº¿u `astro/client-image` báº±ng `astro/client`:

```ts title="src/env.d.ts" del={1} ins={2}
/// <reference types="astro/client-image" />
/// <reference types="astro/client" />
```

##### XÃ³a import alias `~/assets`

Import alias nÃ y khÃ´ng cÃ²n Ä‘Æ°á»£c bao gá»“m theo máº·c Ä‘á»‹nh vá»›i `astro:assets`. Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng alias nÃ y vá»›i experimental assets, báº¡n pháº£i chuyá»ƒn Ä‘á»•i chÃºng thÃ nh relative file paths, hoáº·c [táº¡o import aliases cá»§a riÃªng báº¡n](/vi/guides/imports/#aliases).

```astro title="src/pages/posts/post-1.astro" del={2} ins={3}
---
import rocket from '~/assets/rocket.png';
import rocket from '../../assets/rocket.png';
---
```

##### ThÃªm há»— trá»£ asset Ä‘Æ¡n giáº£n cho Cloudflare, Deno, Vercel Edge vÃ  Netlify Edge

Astro v3.0 cho phÃ©p `astro:assets` hoáº¡t Ä‘á»™ng mÃ  khÃ´ng cÃ³ lá»—i trong Cloudflare, Deno, Vercel Edge vÃ  Netlify Edge, nhá»¯ng nÆ¡i khÃ´ng há»— trá»£ tá»‘i Æ°u hÃ³a hÃ¬nh áº£nh Squoosh vÃ  Sharp tÃ­ch há»£p cá»§a Astro. LÆ°u Ã½ ráº±ng Astro khÃ´ng thá»±c hiá»‡n báº¥t ká»³ chuyá»ƒn Ä‘á»•i vÃ  xá»­ lÃ½ hÃ¬nh áº£nh nÃ o trong cÃ¡c mÃ´i trÆ°á»ng nÃ y. Tuy nhiÃªn, báº¡n váº«n cÃ³ thá»ƒ táº­n hÆ°á»Ÿng cÃ¡c lá»£i Ã­ch khÃ¡c cá»§a viá»‡c sá»­ dá»¥ng `astro:assets`, bao gá»“m khÃ´ng cÃ³ Cumulative Layout Shift (CLS), attribute `alt` Ä‘Æ°á»£c thá»±c thi, vÃ  tráº£i nghiá»‡m authoring nháº¥t quÃ¡n.

Náº¿u báº¡n trÆ°á»›c Ä‘Ã¢y trÃ¡nh sá»­ dá»¥ng `astro:assets` vÃ¬ nhá»¯ng rÃ ng buá»™c nÃ y, bÃ¢y giá» báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng chÃºng mÃ  khÃ´ng cÃ³ váº¥n Ä‘á». Báº¡n cÃ³ thá»ƒ cáº¥u hÃ¬nh no-op image service Ä‘á»ƒ opt-in rÃµ rÃ ng vÃ o hÃ nh vi nÃ y:

```js title="astro.config.mjs" ins={4-8}
import { defineConfig } from 'astro/config';

export default defineConfig({
  image: {
    service: {
      entrypoint: 'astro/assets/services/noop'
    }
  }
});
```

#### Quyáº¿t Ä‘á»‹nh nÆ¡i lÆ°u trá»¯ hÃ¬nh áº£nh cá»§a báº¡n

Xem hÆ°á»›ng dáº«n Images Ä‘á»ƒ giÃºp báº¡n quyáº¿t Ä‘á»‹nh [nÆ¡i lÆ°u trá»¯ hÃ¬nh áº£nh cá»§a báº¡n](/vi/guides/images/#where-to-store-images). Báº¡n cÃ³ thá»ƒ muá»‘n táº­n dá»¥ng cÃ¡c tÃ¹y chá»n má»›i Ä‘á»ƒ lÆ°u trá»¯ hÃ¬nh áº£nh cá»§a mÃ¬nh vá»›i tÃ­nh linh hoáº¡t Ä‘Æ°á»£c thÃªm vÃ o mÃ  `astro:assets` mang láº¡i. VÃ­ dá»¥, hÃ¬nh áº£nh tÆ°Æ¡ng Ä‘á»‘i tá»« `src/` dá»± Ã¡n cá»§a báº¡n hiá»‡n cÃ³ thá»ƒ Ä‘Æ°á»£c tham chiáº¿u trong Markdown, MDX, vÃ  Markdoc báº±ng cÃº phÃ¡p Markdown `![alt](src)` tiÃªu chuáº©n.

#### Cáº­p nháº­t cÃ¡c tháº» `<img>` hiá»‡n cÃ³

TrÆ°á»›c Ä‘Ã¢y, import má»™t hÃ¬nh áº£nh sáº½ tráº£ vá» `string` Ä‘Æ¡n giáº£n vá»›i Ä‘Æ°á»ng dáº«n cá»§a hÃ¬nh áº£nh. BÃ¢y giá», imported image assets khá»›p vá»›i signature sau:

```ts
interface ImageMetadata {
  src: string;
  width: number;
  height: number;
  format: string;
}
```

Báº¡n pháº£i cáº­p nháº­t attribute `src` cá»§a báº¥t ká»³ tháº» `<img>` hiá»‡n cÃ³ nÃ o (bao gá»“m báº¥t ká»³ [hÃ¬nh áº£nh trong UI framework components](/vi/guides/images/#images-in-ui-framework-components)) vÃ  báº¡n cÅ©ng cÃ³ thá»ƒ cáº­p nháº­t cÃ¡c attributes khÃ¡c hiá»‡n cÃ³ sáºµn cho báº¡n tá»« imported image.

```astro title="src/components/MyComponent.astro" ".src" ".width" ".height" del={4} ins={6}
---
import rocket from '../images/rocket.svg';
---
<img src={rocket} width="250" height="250" alt="A rocketship in space." />

<img src={rocket.src} width={rocket.width} height={rocket.height} alt="A rocketship in space." />
```

#### Cáº­p nháº­t files Markdown, MDX, vÃ  Markdoc cá»§a báº¡n

HÃ¬nh áº£nh tÆ°Æ¡ng Ä‘á»‘i tá»« `src/` dá»± Ã¡n cá»§a báº¡n hiá»‡n cÃ³ thá»ƒ Ä‘Æ°á»£c tham chiáº¿u trong Markdown, MDX, vÃ  Markdoc báº±ng cÃº phÃ¡p Markdown `![alt](src)` tiÃªu chuáº©n.

Äiá»u nÃ y cho phÃ©p báº¡n di chuyá»ƒn hÃ¬nh áº£nh cá»§a mÃ¬nh tá»« thÆ° má»¥c `public/` sang `src/` dá»± Ã¡n cá»§a báº¡n nÆ¡i chÃºng sáº½ Ä‘Æ°á»£c xá»­ lÃ½ vÃ  tá»‘i Æ°u hÃ³a. HÃ¬nh áº£nh hiá»‡n cÃ³ cá»§a báº¡n trong `public/` vÃ  hÃ¬nh áº£nh remote váº«n há»£p lá»‡ nhÆ°ng khÃ´ng Ä‘Æ°á»£c tá»‘i Æ°u hÃ³a bá»Ÿi quÃ¡ trÃ¬nh build cá»§a Astro.

```md title="src/pages/posts/post-1.md" "/_astro" ".hash" "../../assets/"
# My Markdown Page

<!-- HÃ¬nh áº£nh cá»¥c bá»™ hiá»‡n cÃ³ thá»ƒ! -->
![A starry night sky.](../../images/stars.png)

<!-- Giá»¯ hÃ¬nh áº£nh cá»§a báº¡n gáº§n ná»™i dung! -->
![A starry night sky.](./stars.png)
```

Náº¿u báº¡n cáº§n kiá»ƒm soÃ¡t nhiá»u hÆ¡n cÃ¡c attributes hÃ¬nh áº£nh cá»§a mÃ¬nh, chÃºng tÃ´i khuyáº¿n nghá»‹ sá»­ dá»¥ng format file `.mdx`, cho phÃ©p báº¡n bao gá»“m component `<Image />` cá»§a Astro hoáº·c tháº» JSX `<img />` ngoÃ i cÃº phÃ¡p Markdown. Sá»­ dá»¥ng [MDX integration](/vi/guides/integrations-guide/mdx/) Ä‘á»ƒ thÃªm há»— trá»£ cho MDX vÃ o Astro.

#### XÃ³a `@astrojs/image`

Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng image integration trong Astro v2.x, hÃ£y hoÃ n thÃ nh cÃ¡c bÆ°á»›c sau:

<Steps>
1. XÃ³a integration `@astrojs/image`.

    Báº¡n pháº£i [xÃ³a integration](/vi/guides/integrations-guide/#removing-an-integration) báº±ng cÃ¡ch gá»¡ cÃ i Ä‘áº·t vÃ  sau Ä‘Ã³ xÃ³a nÃ³ khá»i file `astro.config.mjs` cá»§a báº¡n.

    ```js del={3,7}
    // astro.config.mjs
    import { defineConfig } from 'astro/config';
    import image from '@astrojs/image';

    export default defineConfig({
      integrations: [
        image(),
      ]
    })
    ```

2. Cáº­p nháº­t types (náº¿u cáº§n).

		Náº¿u báº¡n cÃ³ types Ä‘áº·c biá»‡t Ä‘Æ°á»£c cáº¥u hÃ¬nh cho `@astrojs/image` trong `src/env.d.ts`, báº¡n cÃ³ thá»ƒ cáº§n thay Ä‘á»•i chÃºng trá»Ÿ láº¡i thÃ nh types Astro máº·c Ä‘á»‹nh náº¿u viá»‡c nÃ¢ng cáº¥p lÃªn v3 cá»§a báº¡n khÃ´ng hoÃ n thÃ nh bÆ°á»›c nÃ y cho báº¡n.

		```ts title="src/env.d.ts" del={1} ins={2}
		 /// <reference types="@astrojs/image/client" />
		 /// <reference types="astro/client" />
		```

		TÆ°Æ¡ng tá»±, cáº­p nháº­t `tsconfig.json` náº¿u cáº§n:

		```json title="tsconfig.json" del={3} ins={4}
		{
			"compilerOptions": {
			  "types": ["@astrojs/image/client"]
			  "types": ["astro/client"]
			}
		}
		```

3. Di chuyá»ƒn báº¥t ká»³ component `<Image />` hiá»‡n cÃ³ nÃ o.

    Thay Ä‘á»•i táº¥t cáº£ cÃ¡c cÃ¢u lá»‡nh `import` tá»« `@astrojs/image/components` thÃ nh `astro:assets` Ä‘á»ƒ sá»­ dá»¥ng component `<Image />` tÃ­ch há»£p má»›i.

    XÃ³a báº¥t ká»³ component attributes nÃ o khÃ´ng [Ä‘Æ°á»£c há»— trá»£ hiá»‡n táº¡i image asset properties](/vi/reference/modules/astro-assets/#image-properties).

    VÃ­ dá»¥, `aspectRatio` khÃ´ng cÃ²n Ä‘Æ°á»£c há»— trá»£, vÃ¬ nÃ³ hiá»‡n Ä‘Æ°á»£c tá»± Ä‘á»™ng suy ra tá»« cÃ¡c attributes `width` vÃ  `height`.

      ```astro title="src/components/MyComponent.astro" del= {2,11} ins={3}
      ---
      import { Image } from '@astrojs/image/components';
      import { Image } from 'astro:assets';
      import localImage from '../assets/logo.png';
      const localAlt = 'The Astro Logo';
      ---

      <Image
        src={localImage}
        width={300}
        aspectRatio="16:9"
        alt={localAlt}
      />
      ```

4. Chá»n dá»‹ch vá»¥ hÃ¬nh áº£nh máº·c Ä‘á»‹nh.

    [Sharp](https://github.com/lovell/sharp) hiá»‡n lÃ  dá»‹ch vá»¥ hÃ¬nh áº£nh máº·c Ä‘á»‹nh Ä‘Æ°á»£c sá»­ dá»¥ng cho `astro:assets`. Náº¿u báº¡n muá»‘n sá»­ dá»¥ng Sharp, khÃ´ng cáº§n cáº¥u hÃ¬nh.

    Náº¿u báº¡n muá»‘n sá»­ dá»¥ng [Squoosh](https://github.com/GoogleChromeLabs/squoosh) Ä‘á»ƒ chuyá»ƒn Ä‘á»•i hÃ¬nh áº£nh cá»§a mÃ¬nh, hÃ£y cáº­p nháº­t config cá»§a báº¡n vá»›i tÃ¹y chá»n `image.service` sau:

    ```js title="astro.config.mjs" ins={4-6}
    import { defineConfig, squooshImageService } from 'astro/config';

    export default defineConfig({
      image: {
        service: squooshImageService(),
      },
    });
    ```
</Steps>

#### Cáº­p nháº­t Content Collections schemas

BÃ¢y giá» báº¡n cÃ³ thá»ƒ khai bÃ¡o hÃ¬nh áº£nh liÃªn quan cho content collections entry, cháº³ng háº¡n nhÆ° hÃ¬nh áº£nh bÃ¬a cá»§a blog post, trong frontmatter cá»§a báº¡n báº±ng Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i Ä‘áº¿n folder hiá»‡n táº¡i.

Helper `image` má»›i cho content collections cho phÃ©p báº¡n xÃ¡c thá»±c metadata hÃ¬nh áº£nh báº±ng Zod. TÃ¬m hiá»ƒu thÃªm vá» [cÃ¡ch sá»­ dá»¥ng hÃ¬nh áº£nh trong content collections](/vi/guides/images/#images-in-content-collections)

#### Äiá»u hÆ°á»›ng Image Imports trong Astro v3.0

Trong Astro v3.0, náº¿u báº¡n pháº£i giá»¯ hÃ nh vi import cÅ© cho hÃ¬nh áº£nh vÃ  yÃªu cáº§u biá»ƒu diá»…n string cá»§a URL hÃ¬nh áº£nh, hÃ£y thÃªm `?url` vÃ o cuá»‘i Ä‘Æ°á»ng dáº«n hÃ¬nh áº£nh cá»§a báº¡n khi import nÃ³. VÃ­ dá»¥:

```astro title="src/pages/blog/MyImages.astro"
---
import Sprite from '../assets/logo.svg?url';
---

<svg>
  <use xlink:href={Sprite + '#cart'} />
</svg>
```

CÃ¡ch tiáº¿p cáº­n nÃ y Ä‘áº£m báº£o báº¡n cÃ³ Ä‘Æ°á»£c URL string. HÃ£y nhá»› ráº±ng trong quÃ¡ trÃ¬nh development, Astro sá»­ dá»¥ng Ä‘Æ°á»ng dáº«n `src/`, nhÆ°ng khi building, nÃ³ táº¡o ra cÃ¡c Ä‘Æ°á»ng dáº«n Ä‘Ã£ hash nhÆ° `/_astro/cat.a6737dd3.png`.

Náº¿u báº¡n thÃ­ch lÃ m viá»‡c trá»±c tiáº¿p vá»›i chÃ­nh object hÃ¬nh áº£nh, báº¡n cÃ³ thá»ƒ truy cáº­p thuá»™c tÃ­nh `.src`. CÃ¡ch tiáº¿p cáº­n nÃ y tá»‘t nháº¥t cho cÃ¡c tÃ¡c vá»¥ nhÆ° quáº£n lÃ½ kÃ­ch thÆ°á»›c hÃ¬nh áº£nh cho Core Web Vitals metrics vÃ  ngÄƒn CLS.

Náº¿u báº¡n Ä‘ang chuyá»ƒn Ä‘á»•i vÃ o hÃ nh vi import má»›i, viá»‡c káº¿t há»£p cÃ¡c phÆ°Æ¡ng phÃ¡p `?url` vÃ  `.src` cÃ³ thá»ƒ lÃ  phÆ°Æ¡ng phÃ¡p phÃ¹ há»£p Ä‘á»ƒ xá»­ lÃ½ hÃ¬nh áº£nh liá»n máº¡ch.

### NÃ¢ng cáº¥p view transitions lÃªn v3

View transitions khÃ´ng cÃ²n Ä‘áº±ng sau experimental flag trong Astro v3.0.

Náº¿u báº¡n **khÃ´ng** báº­t experimental flag nÃ y trong Astro 2.x, Ä‘iá»u nÃ y sáº½ khÃ´ng gÃ¢y ra báº¥t ká»³ breaking changes nÃ o cho dá»± Ã¡n cá»§a báº¡n. View Transitions API má»›i khÃ´ng cÃ³ tÃ¡c Ä‘á»™ng Ä‘áº¿n code hiá»‡n cÃ³ cá»§a báº¡n.

Náº¿u báº¡n trÆ°á»›c Ä‘Ã¢y Ä‘ang sá»­ dá»¥ng experimental view transitions, cÃ³ thá»ƒ cÃ³ má»™t sá»‘ breaking changes khi báº¡n nÃ¢ng cáº¥p dá»± Ã¡n Astro tá»« phiÃªn báº£n trÆ°á»›c Ä‘Ã³.

Vui lÃ²ng lÃ m theo hÆ°á»›ng dáº«n bÃªn dÆ°á»›i nhÆ° thÃ­ch há»£p Ä‘á»ƒ nÃ¢ng cáº¥p **dá»± Ã¡n Astro v2.x Ä‘Æ°á»£c cáº¥u hÃ¬nh vá»›i `experimental.viewTransitions: true`** lÃªn v3.0.

#### NÃ¢ng cáº¥p tá»« `experimental.viewTransitions`

Náº¿u báº¡n Ä‘Ã£ báº­t experimental flag cho view transitions trÆ°á»›c Ä‘Ã³, báº¡n sáº½ cáº§n cáº­p nháº­t dá»± Ã¡n cho Astro v3.0 hiá»‡n cho phÃ©p view transitions theo máº·c Ä‘á»‹nh.

##### XÃ³a flag `experimental.viewTransitions`

XÃ³a experimental flag:

```js title="astro.config.mjs" del={4-6}
import { defineConfig } from 'astro/config';

export default defineConfig({
  experimental: {
   viewTransitions: true
  }
});
```

##### Cáº­p nháº­t import source

Component `<ViewTransitions />` Ä‘Ã£ Ä‘Æ°á»£c di chuyá»ƒn tá»« `astro:components` sang `astro:transitions`. Cáº­p nháº­t import source trÃªn táº¥t cáº£ cÃ¡c láº§n xuáº¥t hiá»‡n trong dá»± Ã¡n cá»§a báº¡n.

```astro title="src/layouts/BaseLayout.astro" del="astro:components" ins="astro:transitions"
---
import { ViewTransitions } from "astro:components astro:transitions"
---
<html lang="en">
  <head>
    <title>My Homepage</title>
    <ViewTransitions />
  </head>
  <body>
    <h1>Welcome to my website!</h1>
  </body>
</html>
```

#### Cáº­p nháº­t directives `transition:animate`

**ÄÃ£ thay Ä‘á»•i:** GiÃ¡ trá»‹ `transition:animate` `morph` Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»•i tÃªn thÃ nh `initial`. NgoÃ i ra, Ä‘Ã¢y khÃ´ng cÃ²n lÃ  animation máº·c Ä‘á»‹nh. Náº¿u khÃ´ng cÃ³ directive `transition:animate` nÃ o Ä‘Æ°á»£c chá»‰ Ä‘á»‹nh, animations cá»§a báº¡n hiá»‡n sáº½ máº·c Ä‘á»‹nh lÃ  `fade`.

1. Äá»•i tÃªn báº¥t ká»³ animations `morph` nÃ o thÃ nh `initial`.
    ```astro title="src/components/MyComponent.astro" del="morph" ins="initial"
    <div transition:name="name" transition:animate="morph initial" />
    ```
2. Äá»ƒ giá»¯ báº¥t ká»³ animations nÃ o trÆ°á»›c Ä‘Ã¢y sá»­ dá»¥ng `morph` theo máº·c Ä‘á»‹nh, hÃ£y thÃªm rÃµ rÃ ng `transition:animate="initial"`

    ```astro title="src/components/MyComponent.astro" ins='transition:animate="initial"'
    <div transition:name="name" transition:animate="initial" />
    ```
3. Báº¡n cÃ³ thá»ƒ xÃ³a báº¥t ká»³ animations nÃ o Ä‘Æ°á»£c Ä‘áº·t rÃµ rÃ ng thÃ nh `fade`. ÄÃ¢y lÃ  hÃ nh vi máº·c Ä‘á»‹nh hiá»‡n táº¡i:

    ```astro title="src/components/MyComponent.astro" del="transition:animate=\"fade\""
    <div transition:name="name" transition:animate="fade" />
    ```

**ÄÃ£ thÃªm:** Astro cÅ©ng há»— trá»£ giÃ¡ trá»‹ `transition:animate` má»›i, `none`. GiÃ¡ trá»‹ nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng trÃªn pháº§n tá»­ `<html>` cá»§a trang Ä‘á»ƒ vÃ´ hiá»‡u hÃ³a cÃ¡c transitions full-page hoáº¡t hÃ¬nh trÃªn toÃ n bá»™ trang. Äiá»u nÃ y sáº½ chá»‰ ghi Ä‘Ã¨ **hÃ nh vi animation máº·c Ä‘á»‹nh** trÃªn cÃ¡c pháº§n tá»­ trang mÃ  khÃ´ng cÃ³ directive animation. Báº¡n váº«n cÃ³ thá»ƒ Ä‘áº·t animations trÃªn cÃ¡c pháº§n tá»­ riÃªng láº», vÃ  nhá»¯ng animations cá»¥ thá»ƒ nÃ y sáº½ xáº£y ra.

4. BÃ¢y giá» báº¡n cÃ³ thá»ƒ vÃ´ hiá»‡u hÃ³a táº¥t cáº£ cÃ¡c transitions máº·c Ä‘á»‹nh trÃªn má»™t trang riÃªng láº», chá»‰ animate cÃ¡c pháº§n tá»­ sá»­ dá»¥ng rÃµ rÃ ng directive `transition:animate`:

    ```astro ins="transition:animate=\"none\""
    <html transition:animate="none">
      <head></head>
      <body>
        <h1>Hello world!</h1>
      </body>
    </html>
    ```
		
##### Cáº­p nháº­t tÃªn sá»± kiá»‡n

Sá»± kiá»‡n `astro:load` Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»•i tÃªn thÃ nh `astro:page-load`. HÃ£y Ä‘á»•i tÃªn táº¥t cáº£ cÃ¡c trÆ°á»ng há»£p trong dá»± Ã¡n cá»§a báº¡n.

```astro title="src/components/MyComponent.astro" del="astro:load" ins="astro:page-load"
<script>
document.addEventListener('astro:load astro:page-load', runSetupLogic);
</script>
```

Sá»± kiá»‡n `astro:beforeload` Ä‘Ã£ Ä‘Æ°á»£c Ä‘á»•i tÃªn thÃ nh `astro:after-swap`. HÃ£y Ä‘á»•i tÃªn táº¥t cáº£ cÃ¡c trÆ°á»ng há»£p trong dá»± Ã¡n cá»§a báº¡n.

```astro title="src/components/MyComponent.astro" del="astro:beforeload" ins="astro:after-swap"
<script>
document.addEventListener('astro:beforeload astro:after-swap', setDarkMode);
</script>
```


## TÃ i nguyÃªn cá»™ng Ä‘á»“ng

Biáº¿t tÃ i nguyÃªn nÃ o há»¯u Ã­ch cho Astro v3.0? [Chá»‰nh sá»­a trang nÃ y](https://github.com/withastro/docs/edit/main/src/content/docs/vi/guides/upgrade-to/v3.mdx) vÃ  thÃªm liÃªn káº¿t bÃªn dÆ°á»›i!

## CÃ¡c váº¥n Ä‘á» Ä‘Ã£ biáº¿t

Hiá»‡n táº¡i chÆ°a cÃ³ váº¥n Ä‘á» nÃ o Ä‘Æ°á»£c biáº¿t Ä‘áº¿n.