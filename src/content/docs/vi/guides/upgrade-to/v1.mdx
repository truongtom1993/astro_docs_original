---
title: HÆ°á»›ng dáº«n nÃ¢ng cáº¥p Legacy v0.x
description: HÆ°á»›ng dáº«n Ä‘Æ°á»£c lÆ°u trá»¯ ghi chÃ©p cÃ¡c thay Ä‘á»•i giá»¯a cÃ¡c phiÃªn báº£n trÆ°á»›c v1 cá»§a Astro
sidebar:
  label: v1.0
i18nReady: false
---
import { Steps } from '@astrojs/starlight/components';
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro';

HÆ°á»›ng dáº«n nÃ y sáº½ giÃºp báº¡n nÃ¢ng cáº¥p thÃ´ng qua cÃ¡c thay Ä‘á»•i phÃ¡ vá»¡ tÆ°Æ¡ng thÃ­ch trong cÃ¡c phiÃªn báº£n trÆ°á»›c v1 cá»§a Astro.

Báº¡n cÃ³ thá»ƒ cáº­p nháº­t phiÃªn báº£n Astro cá»§a dá»± Ã¡n lÃªn phiÃªn báº£n má»›i nháº¥t báº±ng trÃ¬nh quáº£n lÃ½ gÃ³i. Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng cÃ¡c integration Astro, báº¡n cÅ©ng sáº½ muá»‘n cáº­p nháº­t chÃºng lÃªn phiÃªn báº£n má»›i nháº¥t.

<PackageManagerTabs>
  <Fragment slot="npm">
  ```shell
  # cáº­p nháº­t dependency astro:
  npm upgrade astro
  # hoáº·c, Ä‘á»ƒ cáº­p nháº­t táº¥t cáº£ dependencies:
  npm upgrade
  ```
  </Fragment>
  <Fragment slot="pnpm">
  ```shell
  # cáº­p nháº­t dependency astro:
  pnpm upgrade astro
  # hoáº·c, Ä‘á»ƒ cáº­p nháº­t táº¥t cáº£ dependencies:
  pnpm upgrade
  ```
  </Fragment>
  <Fragment slot="yarn">
  ```shell
  # cáº­p nháº­t dependency astro:
  yarn upgrade astro
  # hoáº·c, Ä‘á»ƒ cáº­p nháº­t táº¥t cáº£ dependencies:
  yarn upgrade
  ```
  </Fragment>
</PackageManagerTabs>

Äá»c hÆ°á»›ng dáº«n dÆ°á»›i Ä‘Ã¢y Ä‘á»ƒ biáº¿t cÃ¡c Ä‘iá»ƒm ná»•i báº­t chÃ­nh vÃ  hÆ°á»›ng dáº«n cÃ¡ch xá»­ lÃ½ cÃ¡c thay Ä‘á»•i phÃ¡ vá»¡ tÆ°Æ¡ng thÃ­ch.

## Astro 1.0

Astro v1.0 giá»›i thiá»‡u má»™t sá»‘ thay Ä‘á»•i mÃ  báº¡n nÃªn biáº¿t khi di chuyá»ƒn tá»« cÃ¡c báº£n phÃ¡t hÃ nh v0.x vÃ  v1.0-beta. Xem chi tiáº¿t bÃªn dÆ°á»›i.

### ÄÃ£ cáº­p nháº­t: Vite 3

Astro v1.0 Ä‘Ã£ nÃ¢ng cáº¥p tá»« Vite 2 lÃªn [Vite 3](https://vite.dev/). ChÃºng tÃ´i Ä‘Ã£ xá»­ lÃ½ háº§u háº¿t viá»‡c nÃ¢ng cáº¥p cho báº¡n bÃªn trong Astro; tuy nhiÃªn, má»™t sá»‘ hÃ nh vi tinh táº¿ cá»§a Vite váº«n cÃ³ thá»ƒ thay Ä‘á»•i giá»¯a cÃ¡c phiÃªn báº£n. Tham kháº£o [HÆ°á»›ng dáº«n di chuyá»ƒn Vite](https://vite.dev/guide/migration.html#general-changes) chÃ­nh thá»©c náº¿u báº¡n gáº·p khÃ³ khÄƒn.

### ÄÃ£ deprecated: `Astro.canonicalURL`

BÃ¢y giá» báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng helper [`Astro.url`](/vi/reference/api-reference/#url) má»›i Ä‘á»ƒ xÃ¢y dá»±ng canonical URL tá»« URL trang/request hiá»‡n táº¡i.

```js del="Astro.canonicalURL" ins="new URL(Astro.url.pathname, Astro.site)"
// TrÆ°á»›c:
const canonicalURL = Astro.canonicalURL;
// Sau:
const canonicalURL = new URL(Astro.url.pathname, Astro.site);
```

### ÄÃ£ thay Ä‘á»•i: Äáº·c hiá»‡u CSS pháº¡m vi

[Äáº·c hiá»‡u](https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity) bÃ¢y giá» sáº½ Ä‘Æ°á»£c báº£o tá»“n trong cÃ¡c kiá»ƒu CSS pháº¡m vi. Thay Ä‘á»•i nÃ y sáº½ khiáº¿n háº§u háº¿t cÃ¡c kiá»ƒu pháº¡m vi _tÃ¬nh cá»_ cÃ³ quyá»n Æ°u tiÃªn trÆ°á»›c cÃ¡c kiá»ƒu toÃ n cá»¥c. NhÆ°ng hÃ nh vi nÃ y khÃ´ng cÃ²n Ä‘Æ°á»£c Ä‘áº£m báº£o má»™t cÃ¡ch rÃµ rÃ ng.

Vá» máº·t ká»¹ thuáº­t, Ä‘iá»u nÃ y Ä‘Æ°á»£c thá»±c hiá»‡n báº±ng cÃ¡ch sá»­ dá»¥ng [pseudo-class `:where()`](https://developer.mozilla.org/en-US/docs/Web/CSS/:where) thay vÃ¬ sá»­ dá»¥ng classes trá»±c tiáº¿p trong CSS output cá»§a Astro.

HÃ£y sá»­ dá»¥ng khá»‘i style sau trong má»™t component Astro lÃ m vÃ­ dá»¥:

```astro
<style>
  div { color: red; } /* Ä‘áº·c hiá»‡u 0-0-1 */
</style>
```

TrÆ°á»›c Ä‘Ã¢y, Astro sáº½ chuyá»ƒn Ä‘á»•i Ä‘iá»u nÃ y thÃ nh CSS sau, cÃ³ Ä‘áº·c hiá»‡u lÃ  `0-1-1` â€” má»™t Ä‘áº·c hiá»‡u cao hÆ¡n CSS nguá»“n:

```css del=".astro-XXXXXX"
div.astro-XXXXXX { color: red; } /* Ä‘áº·c hiá»‡u 0-1-1 */
```

BÃ¢y giá», Astro bao bá»c class selector vá»›i `:where()`, duy trÃ¬ Ä‘áº·c hiá»‡u Ä‘Ã£ viáº¿t:

```css ins=":where(.astro-XXXXXX)"
div:where(.astro-XXXXXX) { color: red; } /* Ä‘áº·c hiá»‡u 0-0-1 */
```

Viá»‡c tÄƒng Ä‘áº·c hiá»‡u trÆ°á»›c Ä‘Ã¢y Ä‘Ã£ khiáº¿n viá»‡c káº¿t há»£p cÃ¡c kiá»ƒu pháº¡m vi trong Astro vá»›i cÃ¡c file CSS khÃ¡c hoáº·c thÆ° viá»‡n styling (vÃ­ dá»¥: Tailwind, CSS Modules, Styled Components, Stitches) trá»Ÿ nÃªn khÃ³ khÄƒn. Thay Ä‘á»•i nÃ y sáº½ cho phÃ©p cÃ¡c kiá»ƒu pháº¡m vi cá»§a Astro hoáº¡t Ä‘á»™ng nháº¥t quÃ¡n cÃ¹ng vá»›i chÃºng trong khi váº«n báº£o tá»“n cÃ¡c ranh giá»›i Ä‘á»™c quyá»n ngÄƒn kiá»ƒu Ä‘Æ°á»£c Ã¡p dá»¥ng bÃªn ngoÃ i component.

:::caution
Khi nÃ¢ng cáº¥p, vui lÃ²ng kiá»ƒm tra trá»±c quan output trang web cá»§a báº¡n Ä‘á»ƒ Ä‘áº£m báº£o má»i thá»© Ä‘Æ°á»£c styled nhÆ° mong Ä‘á»£i. Náº¿u khÃ´ng, hÃ£y tÃ¬m kiá»ƒu pháº¡m vi cá»§a báº¡n vÃ  tÄƒng Ä‘áº·c hiá»‡u selector thá»§ cÃ´ng Ä‘á»ƒ khá»›p vá»›i hÃ nh vi cÅ©.
:::

### ÄÃ£ deprecated: Components vÃ  JSX trong Markdown

Astro khÃ´ng cÃ²n há»— trá»£ components hoáº·c biá»ƒu thá»©c JSX trong cÃ¡c trang Markdown theo máº·c Ä‘á»‹nh. Äá»ƒ há»— trá»£ lÃ¢u dÃ i, báº¡n nÃªn di chuyá»ƒn sang integration [`@astrojs/mdx`](/vi/guides/integrations-guide/mdx/).

Äá»ƒ viá»‡c di chuyá»ƒn dá»… dÃ ng hÆ¡n, má»™t flag `legacy.astroFlavoredMarkdown` má»›i (Ä‘Ã£ bá»‹ xÃ³a trong v2.0) cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ báº­t láº¡i cÃ¡c tÃ­nh nÄƒng Markdown trÆ°á»›c Ä‘Ã¢y.

### Chuyá»ƒn Ä‘á»•i cÃ¡c file `.md` hiá»‡n cÃ³ thÃ nh `.mdx`

Náº¿u báº¡n khÃ´ng quen thuá»™c vá»›i MDX, Ä‘Ã¢y lÃ  má»™t sá»‘ bÆ°á»›c báº¡n cÃ³ thá»ƒ lÃ m theo Ä‘á»ƒ nhanh chÃ³ng chuyá»ƒn Ä‘á»•i file "Astro Flavored Markdown" hiá»‡n cÃ³ thÃ nh MDX. Khi báº¡n tÃ¬m hiá»ƒu thÃªm vá» MDX, hÃ£y thoáº£i mÃ¡i khÃ¡m phÃ¡ cÃ¡c cÃ¡ch khÃ¡c Ä‘á»ƒ viáº¿t trang cá»§a báº¡n!

<Steps>
1. CÃ i Ä‘áº·t integration [`@astrojs/mdx`](/vi/guides/integrations-guide/mdx/).

2. Thay Ä‘á»•i pháº§n má»Ÿ rá»™ng file `.md` hiá»‡n cÃ³ thÃ nh `.mdx`

3. XÃ³a báº¥t ká»³ thuá»™c tÃ­nh `setup:` nÃ o khá»i frontmatter cá»§a báº¡n, vÃ  viáº¿t báº¥t ká»³ cÃ¢u lá»‡nh import nÃ o bÃªn dÆ°á»›i frontmatter thay vÃ o Ä‘Ã³.

    ```mdx del={4-5} ins={10}
    // src/pages/posts/my-post.mdx
    ---
    layout: '../../layouts/BaseLayout.astro'
    setup: |
      import ReactCounter from '../../components/ReactCounter.jsx'
    title: 'Di chuyá»ƒn sang MDX'
    date: 2022-07-26
    tags: ["markdown", "mdx", "astro"]
    ---
    import ReactCounter from '../../components/ReactCounter.jsx'

    # {frontmatter.title}

    ÄÃ¢y lÃ  component counter cá»§a tÃ´i, hoáº¡t Ä‘á»™ng trong MDX:

    <ReactCounter client:load />
    ```

4. Cáº­p nháº­t báº¥t ká»³ cÃ¢u lá»‡nh `Astro.glob()` nÃ o hiá»‡n tráº£ vá» file `.md` Ä‘á»ƒ bÃ¢y giá» chÃºng sáº½ tráº£ vá» file `.mdx` cá»§a báº¡n.

    :::caution
    Object Ä‘Æ°á»£c tráº£ vá» khi import file `.mdx` (bao gá»“m sá»­ dá»¥ng Astro.glob) khÃ¡c vá»›i object Ä‘Æ°á»£c tráº£ vá» khi import file `.md`. Tuy nhiÃªn, `frontmatter`, `file`, vÃ  `url` hoáº¡t Ä‘á»™ng giá»‘ng há»‡t nhau.
    :::

5. Cáº­p nháº­t báº¥t ká»³ viá»‡c sá»­ dá»¥ng component `<Content />` nÃ o Ä‘á»ƒ sá»­ dá»¥ng default export khi import MDX:

    ```astro title="src/pages/index.astro" ins=".default"
    ---
    // Multiple imports vá»›i Astro.glob
    const mdxPosts = await Astro.glob('./posts/*.mdx');
    ---

    {mdxPosts.map(Post => <Post.default />)}
    ```
    
    ```astro title="src/pages/index.astro" ins="default as"
    ---
    // Import má»™t trang duy nháº¥t
    import { default as About } from './about.mdx';
    ---

    <About />    
    ```
</Steps>

:::tip
Trong khi báº¡n Ä‘ang chuyá»ƒn Ä‘á»•i sang MDX, báº¡n cÃ³ thá»ƒ muá»‘n báº­t flag `legacy.astroFlavoredMarkdown` (Ä‘Ã£ bá»‹ xÃ³a trong v2.0) vÃ  bao gá»“m cáº£ file **`.md` vÃ  `.mdx`**, Ä‘á»ƒ trang web cá»§a báº¡n tiáº¿p tá»¥c hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng ngay cáº£ trÆ°á»›c khi táº¥t cáº£ file cá»§a báº¡n Ä‘Æ°á»£c chuyá»ƒn Ä‘á»•i. ÄÃ¢y lÃ  má»™t cÃ¡ch báº¡n cÃ³ thá»ƒ lÃ m Ä‘iá»u Ä‘Ã³:

```astro
---
const mdPosts = await Astro.glob('../pages/posts/*.md');
const mdxPosts = await Astro.glob('../pages/posts/*.mdx');
const allPosts = [...mdxPosts, ...mdPosts];
---
```
:::

### Component `<Markdown />` Ä‘Ã£ bá»‹ xÃ³a

Component `<Markdown />` tÃ­ch há»£p cá»§a Astro Ä‘Ã£ Ä‘Æ°á»£c chuyá»ƒn sang má»™t gÃ³i riÃªng biá»‡t. Äá»ƒ tiáº¿p tá»¥c sá»­ dá»¥ng component nÃ y, báº¡n giá» Ä‘Ã¢y sáº½ cáº§n cÃ i Ä‘áº·t `@astrojs/markdown-component` vÃ  cáº­p nháº­t imports cá»§a báº¡n cho phÃ¹ há»£p. Äá»ƒ biáº¿t thÃªm chi tiáº¿t, xem [README `@astrojs/markdown`](https://github.com/withastro/astro/tree/main/packages/markdown/component).

:::tip
Astro hiá»‡n Ä‘Ã£ há»— trá»£ [MDX](https://mdxjs.com/) thÃ´ng qua [integration MDX](https://github.com/withastro/astro/tree/main/packages/integrations/mdx) cá»§a chÃºng tÃ´i. MDX cung cáº¥p cho báº¡n kháº£ nÄƒng bao gá»“m cáº£ Markdown vÃ  cÃ¡c imported components trong cÃ¹ng má»™t file. MDX cÃ³ thá»ƒ lÃ  má»™t giáº£i phÃ¡p thay tháº¿ tá»‘t cho component `<Markdown />` do cá»™ng Ä‘á»“ng lá»›n vÃ  API á»•n Ä‘á»‹nh cá»§a nÃ³.
:::

## Di chuyá»ƒn sang v1.0.0-beta

VÃ o ngÃ y 4 thÃ¡ng 4 nÄƒm 2022, chÃºng tÃ´i Ä‘Ã£ phÃ¡t hÃ nh Astro 1.0 Beta! ğŸ‰

Náº¿u báº¡n Ä‘ang Ä‘áº¿n tá»« v0.25 hoáº·c sá»›m hÆ¡n, hÃ£y Ä‘áº£m báº£o ráº±ng báº¡n Ä‘Ã£ Ä‘á»c vÃ  lÃ m theo [HÆ°á»›ng dáº«n di chuyá»ƒn v0.26](#migrate-to-v026) bÃªn dÆ°á»›i, nÃ³ chá»©a má»™t sá»‘ thay Ä‘á»•i phÃ¡ vá»¡ tÆ°Æ¡ng thÃ­ch lá»›n.

Báº£n phÃ¡t hÃ nh `v1.0.0-beta.0` cá»§a Astro khÃ´ng chá»©a thay Ä‘á»•i phÃ¡ vá»¡ tÆ°Æ¡ng thÃ­ch nÃ o. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡c thay Ä‘á»•i nhá» Ä‘Æ°á»£c giá»›i thiá»‡u trong thá»i ká»³ beta.

### ÄÃ£ thay Ä‘á»•i: RSS Feeds

RSS feeds bÃ¢y giá» nÃªn Ä‘Æ°á»£c táº¡o báº±ng gÃ³i `@astrojs/rss`, nhÆ° Ä‘Æ°á»£c mÃ´ táº£ trong [hÆ°á»›ng dáº«n RSS](/vi/recipes/rss/) cá»§a chÃºng tÃ´i.

## Di chuyá»ƒn sang v0.26

### API cáº¥u hÃ¬nh má»›i

API cáº¥u hÃ¬nh cá»§a chÃºng tÃ´i Ä‘Ã£ Ä‘Æ°á»£c thiáº¿t káº¿ láº¡i Ä‘á»ƒ giáº£i quyáº¿t má»™t sá»‘ Ä‘iá»ƒm nháº§m láº«n rÃµ rÃ ng Ä‘Ã£ tÃ­ch tá»¥ trong nÄƒm qua. Háº§u háº¿t cÃ¡c tÃ¹y chá»n cáº¥u hÃ¬nh chá»‰ Ä‘Æ°á»£c di chuyá»ƒn hoáº·c Ä‘á»•i tÃªn, hi vá»ng sáº½ lÃ  má»™t cáº­p nháº­t nhanh chÃ³ng cho háº§u háº¿t ngÆ°á»i dÃ¹ng. Má»™t sá»‘ tÃ¹y chá»n Ä‘Ã£ Ä‘Æ°á»£c refactor náº·ng hÆ¡n, vÃ  cÃ³ thá»ƒ yÃªu cáº§u má»™t sá»‘ thay Ä‘á»•i bá»• sung:

- `.buildOptions.site` Ä‘Ã£ Ä‘Æ°á»£c thay tháº¿ báº±ng `.site` (tÃªn miá»n Ä‘Ã£ deploy cá»§a báº¡n) vÃ  tÃ¹y chá»n `.base` má»›i (subpath Ä‘Ã£ deploy cá»§a báº¡n).
- `.markdownOptions` Ä‘Ã£ Ä‘Æ°á»£c thay tháº¿ báº±ng `.markdown`, má»™t object config chá»§ yáº¿u tÆ°Æ¡ng tá»± vá»›i má»™t sá»‘ thay Ä‘á»•i nhá» Ä‘á»ƒ Ä‘Æ¡n giáº£n hÃ³a cáº¥u hÃ¬nh Markdown.
- `.sitemap` Ä‘Ã£ Ä‘Æ°á»£c chuyá»ƒn vÃ o integration [@astrojs/sitemap](https://www.npmjs.com/package/@astrojs/sitemap).

Náº¿u báº¡n cháº¡y Astro vá»›i cáº¥u hÃ¬nh legacy, báº¡n sáº½ tháº¥y má»™t cáº£nh bÃ¡o vá»›i hÆ°á»›ng dáº«n cÃ¡ch cáº­p nháº­t. Xem [Tham chiáº¿u cáº¥u hÃ¬nh](/vi/reference/configuration-reference/) Ä‘Ã£ cáº­p nháº­t cá»§a chÃºng tÃ´i Ä‘á»ƒ biáº¿t thÃªm thÃ´ng tin vá» viá»‡c nÃ¢ng cáº¥p.

Äá»c [RFC0019](https://github.com/withastro/rfcs/blob/main/proposals/0019-config-finalization.md) Ä‘á»ƒ biáº¿t thÃªm bá»‘i cáº£nh vá» nhá»¯ng thay Ä‘á»•i nÃ y.

### API Markdown má»›i

Astro v0.26 phÃ¡t hÃ nh má»™t API Markdown hoÃ n toÃ n má»›i cho ná»™i dung cá»§a báº¡n. Äiá»u nÃ y bao gá»“m ba thay Ä‘á»•i lá»›n máº·t ngÆ°á»i dÃ¹ng:
- BÃ¢y giá» báº¡n cÃ³ thá»ƒ `import`/`import()` ná»™i dung markdown trá»±c tiáº¿p báº±ng ESM import.
- Má»™t API `Astro.glob()` má»›i, Ä‘á»ƒ dá»… dÃ ng glob imports (Ä‘áº·c biá»‡t cho Markdown).
- **THAY Äá»”I PHÃ Vá»  TÆ¯Æ NG THÃCH:** `Astro.fetchContent()` Ä‘Ã£ bá»‹ xÃ³a vÃ  thay tháº¿ báº±ng `Astro.glob()`
- **THAY Äá»”I PHÃ Vá»  TÆ¯Æ NG THÃCH:** CÃ¡c object Markdown cÃ³ interface Ä‘Ã£ cáº­p nháº­t.

```js del={2} ins={4}
// v0.25
let allPosts = Astro.fetchContent('./posts/*.md');
// v0.26+
let allPosts = await Astro.glob('./posts/*.md');
```

Khi di chuyá»ƒn, hÃ£y cáº©n tháº­n vá» interface object Markdown má»›i. Frontmatter, vÃ­ dá»¥, Ä‘Ã£ Ä‘Æ°á»£c chuyá»ƒn sang thuá»™c tÃ­nh `.frontmatter`, vÃ¬ váº­y cÃ¡c tham chiáº¿u nhÆ° `post.title` nÃªn thay Ä‘á»•i thÃ nh `post.frontmatter.title`.

Äiá»u nÃ y sáº½ giáº£i quyáº¿t nhiá»u váº¥n Ä‘á» cho ngÆ°á»i dÃ¹ng Markdown, bao gá»“m má»™t sá»‘ cáº£i thiá»‡n hiá»‡u suáº¥t tuyá»‡t vá»i cho cÃ¡c trang web lá»›n hÆ¡n.

Äá»c [RFC0017](https://github.com/withastro/rfcs/blob/main/proposals/0017-markdown-content-redesign.md) Ä‘á»ƒ biáº¿t thÃªm bá»‘i cáº£nh vá» nhá»¯ng thay Ä‘á»•i nÃ y.

### HÃ nh vi Script máº·c Ä‘á»‹nh má»›i

Tháº» `<script>` trong cÃ¡c component Astro bÃ¢y giá» Ä‘Æ°á»£c build, bundle vÃ  tá»‘i Æ°u hÃ³a theo máº·c Ä‘á»‹nh. Äiá»u nÃ y hoÃ n thÃ nh má»™t Ä‘á»™ng thÃ¡i dÃ i háº¡n Ä‘á»ƒ lÃ m cho cÃº phÃ¡p component Astro cá»§a chÃºng tÃ´i nháº¥t quÃ¡n hÆ¡n, khá»›p vá»›i hÃ nh vi tá»‘i Æ°u hÃ³a máº·c Ä‘á»‹nh mÃ  tháº» `<style>` cá»§a chÃºng tÃ´i cÃ³ ngÃ y hÃ´m nay.

Äiá»u nÃ y bao gá»“m má»™t sá»‘ thay Ä‘á»•i cáº§n lÆ°u Ã½:

- **PHÃ Vá»  TÆ¯Æ NG THÃCH:** `<script hoist>` lÃ  hÃ nh vi `<script>` máº·c Ä‘á»‹nh má»›i. Thuá»™c tÃ­nh `hoist` Ä‘Ã£ bá»‹ xÃ³a. Äá»ƒ sá»­ dá»¥ng hÃ nh vi máº·c Ä‘á»‹nh má»›i, hÃ£y Ä‘áº£m báº£o khÃ´ng cÃ³ thuá»™c tÃ­nh nÃ o khÃ¡c trÃªn tháº» `<script>`. VÃ­ dá»¥, xÃ³a `type="module"` náº¿u báº¡n Ä‘Ã£ sá»­ dá»¥ng nÃ³ trÆ°á»›c Ä‘Ã¢y.
- Directive `<script is:inline>` má»›i, Ä‘á»ƒ hoÃ n nguyÃªn tháº» `<script>` vá» hÃ nh vi máº·c Ä‘á»‹nh trÆ°á»›c Ä‘Ã¢y (khÃ´ng build, khÃ´ng bundle, khÃ´ng Ä‘Æ°á»£c Astro cháº¡m vÃ o).
- Directive `<style is:inline>` má»›i, Ä‘á»ƒ Ä‘á»ƒ láº¡i tháº» style inline trong template trang (tÆ°Æ¡ng tá»± hÃ nh vi `<script>` trÆ°á»›c Ä‘Ã¢y).
- Directive `<style is:global>` má»›i Ä‘á»ƒ thay tháº¿ `<style global>` trong má»™t báº£n phÃ¡t hÃ nh tÆ°Æ¡ng lai.

```js del={2} ins={4}
// v0.25
<script hoist type="module">
// v0.26+
<script>
```

Xem cÃ¡ch sá»­ dá»¥ng [client-side scripts](/vi/guides/client-side-scripts/) trong Astro Ä‘á»ƒ biáº¿t chi tiáº¿t Ä‘áº§y Ä‘á»§.

Äá»c [RFC0016](https://github.com/withastro/rfcs/blob/main/proposals/0016-style-script-defaults.md) Ä‘á»ƒ biáº¿t thÃªm bá»‘i cáº£nh vá» nhá»¯ng thay Ä‘á»•i nÃ y.

### API `Astro.request` Ä‘Ã£ cáº­p nháº­t

`Astro.request` Ä‘Ã£ Ä‘Æ°á»£c thay Ä‘á»•i tá»« object tÃ¹y chá»‰nh cá»§a chÃºng tÃ´i thÃ nh object `Request` tiÃªu chuáº©n. Äiá»u nÃ y lÃ  má»™t pháº§n cá»§a dá»± Ã¡n sá»­ dá»¥ng nhiá»u API tiÃªu chuáº©n web hÆ¡n, Ä‘áº·c biá»‡t lÃ  khi liÃªn quan Ä‘áº¿n SSR.

Äiá»u nÃ y bao gá»“m má»™t sá»‘ thay Ä‘á»•i cáº§n lÆ°u Ã½:

- Thay Ä‘á»•i `Astro.request` Ä‘á»ƒ trá»Ÿ thÃ nh object [Request](https://developer.mozilla.org/en-US/docs/Web/API/Request).
- Di chuyá»ƒn `Astro.request.params` sang `Astro.params`.
- Di chuyá»ƒn `Astro.request.canonicalURL` sang `Astro.canonicalURL`.

Äá»c [RFC0018](https://github.com/withastro/rfcs/blob/main/proposals/0018-astro-request.md) Ä‘á»ƒ biáº¿t thÃªm bá»‘i cáº£nh vá» nhá»¯ng thay Ä‘á»•i nÃ y.

### Thay Ä‘á»•i khÃ¡c

- Cáº£i thiá»‡n API `Astro.slots` Ä‘á»ƒ há»— trá»£ truyá»n tham sá»‘ cho cÃ¡c slot dá»±a trÃªn function. Äiá»u nÃ y cho phÃ©p cÃ¡c utility component tiá»‡n dá»¥ng hÆ¡n cháº¥p nháº­n function callback nhÆ° má»™t child.
- Cáº­p nháº­t Ä‘á»‹nh dáº¡ng output CLI, Ä‘áº·c biá»‡t lÃ  xung quanh bÃ¡o cÃ¡o lá»—i.
- Cáº­p nháº­t `@astrojs/compiler`, sá»­a má»™t sá»‘ bug liÃªn quan Ä‘áº¿n viá»‡c sá»­ dá»¥ng RegExp trong frontmatter

## Di chuyá»ƒn sang v0.25

### Integration Astro

Config `renderers` Ä‘Ã£ Ä‘Æ°á»£c thay tháº¿ báº±ng má»™t há»‡ thá»‘ng integration chÃ­nh thá»©c má»›i! Äiá»u nÃ y má»Ÿ khÃ³a má»™t sá»‘ tÃ­nh nÄƒng má»›i thÃº vá»‹ cho Astro. Báº¡n cÃ³ thá»ƒ Ä‘á»c hÆ°á»›ng dáº«n [Sá»­ dá»¥ng Integrations](/vi/guides/integrations-guide/) cá»§a chÃºng tÃ´i Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t vá» cÃ¡ch sá»­ dá»¥ng há»‡ thá»‘ng má»›i nÃ y.

Integrations thay tháº¿ khÃ¡i niá»‡m `renderers` ban Ä‘áº§u cá»§a chÃºng tÃ´i, vÃ  Ä‘i kÃ¨m vá»›i má»™t sá»‘ thay Ä‘á»•i phÃ¡ vá»¡ tÆ°Æ¡ng thÃ­ch vÃ  máº·c Ä‘á»‹nh má»›i cho ngÆ°á»i dÃ¹ng hiá»‡n cÃ³. Nhá»¯ng thay Ä‘á»•i nÃ y Ä‘Æ°á»£c Ä‘á» cáº­p bÃªn dÆ°á»›i.

#### ÄÃ£ xÃ³a: Há»— trá»£ Framework tÃ­ch há»£p

TrÆ°á»›c Ä‘Ã¢y, React, Preact, Svelte, vÃ  Vue Ä‘á»u Ä‘Æ°á»£c bao gá»“m vá»›i Astro theo máº·c Ä‘á»‹nh. Báº¯t Ä‘áº§u tá»« v0.25.0, Astro khÃ´ng cÃ²n Ä‘i kÃ¨m vá»›i báº¥t ká»³ renderer tÃ­ch há»£p nÃ o. Náº¿u báº¡n chÆ°a cÃ³ entry cáº¥u hÃ¬nh `renderers` Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a cho dá»± Ã¡n cá»§a mÃ¬nh, báº¡n giá» Ä‘Ã¢y sáº½ cáº§n tá»± cÃ i Ä‘áº·t nhá»¯ng framework Ä‘Ã³.

Äá»c [hÆ°á»›ng dáº«n tá»«ng bÆ°á»›c](/vi/guides/integrations-guide/) cá»§a chÃºng tÃ´i Ä‘á»ƒ tÃ¬m hiá»ƒu cÃ¡ch thÃªm integration Astro má»›i cho (cÃ¡c) framework mÃ  báº¡n hiá»‡n Ä‘ang sá»­ dá»¥ng.

#### ÄÃ£ deprecated: Renderers

:::note
Äá»c pháº§n nÃ y náº¿u báº¡n Ä‘Ã£ cÃ³ "renderers" tÃ¹y chá»‰nh Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a trong file cáº¥u hÃ¬nh cá»§a mÃ¬nh.
:::

Há»‡ thá»‘ng integration má»›i thay tháº¿ há»‡ thá»‘ng `renderers` trÆ°á»›c Ä‘Ã¢y, bao gá»“m cÃ¡c gÃ³i `@astrojs/renderer-*` Ä‘Ã£ published trÃªn npm. Tiáº¿n lÃªn, `@astrojs/renderer-react` trá»Ÿ thÃ nh `@astrojs/react`, `@astrojs/renderer-vue` trá»Ÿ thÃ nh `@astrojs/vue`, v.v.

**Äá»ƒ di chuyá»ƒn:** cáº­p nháº­t Astro lÃªn `v0.25.0` vÃ  sau Ä‘Ã³ cháº¡y `astro dev` hoáº·c `astro build` vá»›i file cáº¥u hÃ¬nh cÅ© cá»§a báº¡n chá»©a config `"renderers"` Ä‘Ã£ lá»—i thá»i. Báº¡n sáº½ ngay láº­p tá»©c tháº¥y má»™t thÃ´ng bÃ¡o cho báº¡n biáº¿t nhá»¯ng thay Ä‘á»•i chÃ­nh xÃ¡c báº¡n cáº§n thá»±c hiá»‡n vá»›i file `astro.config.mjs` cá»§a mÃ¬nh, dá»±a trÃªn config hiá»‡n táº¡i cá»§a báº¡n. Báº¡n cÅ©ng cÃ³ thá»ƒ tá»± cáº­p nháº­t cÃ¡c gÃ³i cá»§a mÃ¬nh, sá»­ dá»¥ng báº£ng bÃªn dÆ°á»›i.

Äá»ƒ cÃ³ hÆ°á»›ng dáº«n sÃ¢u hÆ¡n, Ä‘á»c [hÆ°á»›ng dáº«n tá»«ng bÆ°á»›c](/vi/guides/integrations-guide/) cá»§a chÃºng tÃ´i Ä‘á»ƒ tÃ¬m hiá»ƒu cÃ¡ch thay tháº¿ cÃ¡c renderer hiá»‡n cÃ³ báº±ng integration framework Astro má»›i.

```shell add={3-4}
# CÃ i Ä‘áº·t cÃ¡c integration vÃ  framework má»›i cá»§a báº¡n:
# (Äá»c hÆ°á»›ng dáº«n Ä‘áº§y Ä‘á»§: https://docs.astro.build/vi/guides/integrations-guide)
npm install @astrojs/lit lit
npm install @astrojs/react react react-dom
```

```js ins={3-4,8} del={7}
// Sau Ä‘Ã³, cáº­p nháº­t file `astro.config.mjs` cá»§a báº¡n:
// (Äá»c hÆ°á»›ng dáº«n Ä‘áº§y Ä‘á»§: https://docs.astro.build/vi/guides/integrations-guide)
import lit from '@astrojs/lit';
import react from '@astrojs/react';

export default {
  renderers: ['@astrojs/renderer-lit', '@astrojs/renderer-react'],
  integrations: [lit(), react()],
}
```

| Renderers Ä‘Ã£ deprecated trÃªn npm | Integrations v0.25+ trÃªn npm |
| --------------------------- | -------------------------- |
| @astrojs/renderer-react     | @astrojs/react             |
| @astrojs/renderer-preact    | @astrojs/preact            |
| @astrojs/renderer-solid     | @astrojs/solid-js          |
| @astrojs/renderer-vue       | @astrojs/vue               |
| @astrojs/renderer-svelte    | @astrojs/svelte            |

#### Xá»­ lÃ½ Peer Dependencies

:::note
Äá»c pháº§n nÃ y náº¿u: Báº¡n Ä‘ang sá»­ dá»¥ng Node v14 **hoáº·c** náº¿u báº¡n sá»­ dá»¥ng báº¥t ká»³ trÃ¬nh quáº£n lÃ½ gÃ³i nÃ o khÃ¡c ngoÃ i npm.
:::

KhÃ´ng giá»‘ng nhÆ° cÃ¡c renderer cÅ©, integrations khÃ´ng cÃ²n Ä‘Ã¡nh dáº¥u cÃ¡c framework chÃ­nh ("react", "svelte", "vue", v.v.) nhÆ° cÃ¡c dependency trá»±c tiáº¿p cá»§a integration. Thay vÃ o Ä‘Ã³, bÃ¢y giá» báº¡n nÃªn cÃ i Ä‘áº·t cÃ¡c gÃ³i framework cá»§a mÃ¬nh *ngoÃ i ra* cÃ¡c integration cá»§a báº¡n.

```shell ins="react react-dom"
# VÃ­ dá»¥: CÃ i Ä‘áº·t integrations vÃ  frameworks cÃ¹ng nhau
npm install @astrojs/react react react-dom
```

Náº¿u báº¡n tháº¥y cáº£nh bÃ¡o `"Cannot find package 'react'"` (hoáº·c tÆ°Æ¡ng tá»±) khi báº¡n khá»Ÿi Ä‘á»™ng Astro, Ä‘iá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ  báº¡n cáº§n cÃ i Ä‘áº·t gÃ³i Ä‘Ã³ vÃ o dá»± Ã¡n cá»§a mÃ¬nh. Xem [ghi chÃº vá» peer dependencies](/vi/guides/troubleshooting/#cannot-find-package-x) cá»§a chÃºng tÃ´i trong hÆ°á»›ng dáº«n kháº¯c phá»¥c sá»± cá»‘ Ä‘á»ƒ biáº¿t thÃªm thÃ´ng tin.

Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng `npm` & Node v16+, thÃ¬ Ä‘iá»u nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c tá»± Ä‘á»™ng xá»­ lÃ½ cho báº¡n bá»Ÿi `npm`, vÃ¬ phiÃªn báº£n má»›i nháº¥t cá»§a `npm` (v7+) tá»± Ä‘á»™ng cÃ i Ä‘áº·t peer dependencies nhÆ° tháº¿ nÃ y cho báº¡n. Trong trÆ°á»ng há»£p Ä‘Ã³, viá»‡c cÃ i Ä‘áº·t má»™t framework nhÆ° "react" vÃ o dá»± Ã¡n cá»§a báº¡n lÃ  má»™t bÆ°á»›c tÃ¹y chá»n nhÆ°ng váº«n Ä‘Æ°á»£c khuyáº¿n nghá»‹.

### ÄÃ£ cáº­p nháº­t: Syntax Highlighting

ChÃºng tÃ´i thÃ­ch tÃ¬m cÃ¡c máº·c Ä‘á»‹nh há»£p lÃ½ "chá»‰ hoáº¡t Ä‘á»™ng" ngay tá»« Ä‘áº§u. LÃ  má»™t pháº§n cá»§a Ä‘iá»u nÃ y, chÃºng tÃ´i quyáº¿t Ä‘á»‹nh lÃ m cho [Shiki](https://github.com/shikijs/shiki) trá»Ÿ thÃ nh syntax highlighter máº·c Ä‘á»‹nh má»›i cá»§a chÃºng tÃ´i. Äiá»u nÃ y Ä‘i kÃ¨m vá»›i cáº¥u hÃ¬nh sáºµn vá»›i theme `github-dark`, cung cáº¥p highlighting khÃ´ng cáº¥u hÃ¬nh trong cÃ¡c code block cá»§a báº¡n mÃ  khÃ´ng cÃ³ CSS classes thá»«a, stylesheets, hoáº·c JS phÃ­a client.

Kiá»ƒm tra tÃ i liá»‡u syntax highlighting má»›i cá»§a chÃºng tÃ´i Ä‘á»ƒ biáº¿t chi tiáº¿t Ä‘áº§y Ä‘á»§. **Náº¿u báº¡n thÃ­ch giá»¯ Prism lÃ m syntax highlighter cá»§a mÃ¬nh,** hÃ£y Ä‘áº·t tÃ¹y chá»n `syntaxHighlight` thÃ nh `'prism'` trong cáº¥u hÃ¬nh markdown cá»§a dá»± Ã¡n.

#### Component `<Prism />` cÃ³ má»™t ngÃ´i nhÃ  má»›i

NhÆ° má»™t pháº§n cá»§a sá»© má»‡nh giá»¯ cho Astro core cÃ ng gá»n gÃ ng cÃ ng tá»‘t, chÃºng tÃ´i Ä‘Ã£ chuyá»ƒn component `Prism` tÃ­ch há»£p ra khá»i `astro/components` vÃ  vÃ o gÃ³i `@astrojs/prism`. BÃ¢y giá» báº¡n cÃ³ thá»ƒ import component nÃ y tá»« `@astrojs/prism` nhÆ° tháº¿ nÃ y:

```astro
---
import { Prism } from '@astrojs/prism';
---
```

VÃ¬ gÃ³i `@astrojs/prism` váº«n Ä‘Æ°á»£c bundle vá»›i `astro` core, báº¡n sáº½ khÃ´ng cáº§n cÃ i Ä‘áº·t gÃ¬ má»›i, cÅ©ng khÃ´ng thÃªm Prism nhÆ° má»™t integration! Tuy nhiÃªn, lÆ°u Ã½ ráº±ng chÃºng tÃ´i _dá»± Ä‘á»‹nh_ trÃ­ch xuáº¥t `@astrojs/prism` (vÃ  Prism syntax highlighting nÃ³i chung) thÃ nh má»™t gÃ³i riÃªng biá»‡t, cÃ³ thá»ƒ cÃ i Ä‘áº·t trong tÆ°Æ¡ng lai. Xem tham chiáº¿u API component `<Prism />` Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t.

### NÃ¢ng cáº¥p CSS Parser

CSS parser ná»™i bá»™ cá»§a chÃºng tÃ´i Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t, vÃ  Ä‘i kÃ¨m vá»›i há»— trá»£ tá»‘t hÆ¡n cho cÃº phÃ¡p CSS nÃ¢ng cao, nhÆ° container queries. ÄÃ¢y nÃªn lÃ  má»™t thay Ä‘á»•i chá»§ yáº¿u vÃ´ hÃ¬nh Ä‘á»‘i vá»›i háº§u háº¿t ngÆ°á»i dÃ¹ng, nhÆ°ng hy vá»ng ngÆ°á»i dÃ¹ng nÃ¢ng cao sáº½ thÃ­ch há»— trá»£ tÃ­nh nÄƒng CSS má»›i.

## Di chuyá»ƒn sang v0.24

:::note
Chiáº¿n lÆ°á»£c build má»›i Ä‘Æ°á»£c báº­t theo máº·c Ä‘á»‹nh trÃªn 0.24. Náº¿u báº¡n gáº·p váº¥n Ä‘á», báº¡n cÃ³ thá»ƒ tiáº¿p tá»¥c sá»­ dá»¥ng chiáº¿n lÆ°á»£c build cÅ© báº±ng cÃ¡ch truyá»n flag `--legacy-build`. Vui lÃ²ng [má»Ÿ má»™t issue](https://github.com/withastro/astro/issues/new/choose) Ä‘á»ƒ chÃºng tÃ´i cÃ³ thá»ƒ giáº£i quyáº¿t cÃ¡c váº¥n Ä‘á» vá»›i chiáº¿n lÆ°á»£c build má»›i.
:::

0.24 giá»›i thiá»‡u má»™t chiáº¿n lÆ°á»£c *static build* má»›i thay Ä‘á»•i hÃ nh vi cá»§a má»™t sá»‘ tÃ­nh nÄƒng. Trong cÃ¡c phiÃªn báº£n trÆ°á»›c cá»§a Astro, Ä‘Ã¢y lÃ  hÃ nh vi cÃ³ sáºµn vá»›i flag opt-in: `--experimental-static-build`.

Äá»ƒ di chuyá»ƒn cho quÃ¡ trÃ¬nh chuyá»ƒn Ä‘á»•i, hÃ£y lÆ°u Ã½ nhá»¯ng thay Ä‘á»•i sau sáº½ Ä‘Æ°á»£c yÃªu cáº§u Ä‘á»ƒ chuyá»ƒn sang engine build má»›i nÃ y. Báº¡n cÃ³ thá»ƒ thá»±c hiá»‡n nhá»¯ng thay Ä‘á»•i nÃ y cho codebase cá»§a mÃ¬nh báº¥t cá»© lÃºc nÃ o Ä‘á»ƒ sáºµn sÃ ng trÆ°á»›c thá»i háº¡n.

### ÄÃ£ deprecated: `Astro.resolve()`

`Astro.resolve()` cho phÃ©p báº¡n láº¥y URL Ä‘Ã£ resolved cho cÃ¡c asset mÃ  báº¡n cÃ³ thá»ƒ muá»‘n tham chiáº¿u trong trÃ¬nh duyá»‡t. Äiá»u nÃ y thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng bÃªn trong tháº» `<link>` vÃ  `<img>` Ä‘á»ƒ táº£i file CSS vÃ  hÃ¬nh áº£nh khi cáº§n. Tháº­t khÃ´ng may, Ä‘iá»u nÃ y sáº½ khÃ´ng cÃ²n hoáº¡t Ä‘á»™ng do Astro bÃ¢y giá» building assets táº¡i *thá»i gian build* thay vÃ¬ táº¡i *thá»i gian render*. Báº¡n sáº½ muá»‘n nÃ¢ng cáº¥p cÃ¡c tham chiáº¿u asset cá»§a mÃ¬nh thÃ nh má»™t trong nhá»¯ng tÃ¹y chá»n chá»‘ng tÆ°Æ¡ng lai sau Ä‘Ã¢y cÃ³ sáºµn tiáº¿n vá» phÃ­a trÆ°á»›c:

#### CÃ¡ch Resolve CSS Files

**1. ESM Import (ÄÆ°á»£c khuyáº¿n nghá»‹)**

**VÃ­ dá»¥:** `import './style.css';`
**Khi nÃ o sá»­ dá»¥ng:** Náº¿u file CSS cá»§a báº¡n náº±m bÃªn trong thÆ° má»¥c `src/`, vÃ  báº¡n muá»‘n cÃ¡c tÃ­nh nÄƒng build vÃ  tá»‘i Æ°u hÃ³a CSS tá»± Ä‘á»™ng.

Sá»­ dá»¥ng ESM import Ä‘á»ƒ thÃªm má»™t sá»‘ CSS vÃ o trang. Astro phÃ¡t hiá»‡n nhá»¯ng CSS import nÃ y vÃ  sau Ä‘Ã³ build, tá»‘i Æ°u hÃ³a, vÃ  thÃªm CSS vÃ o trang tá»± Ä‘á»™ng. ÄÃ¢y lÃ  cÃ¡ch dá»… nháº¥t Ä‘á»ƒ di chuyá»ƒn tá»« `Astro.resolve()` trong khi giá»¯ láº¡i building/bundling tá»± Ä‘á»™ng mÃ  Astro cung cáº¥p.

```astro
---
// VÃ­ dá»¥: Astro sáº½ bao gá»“m vÃ  tá»‘i Æ°u hÃ³a CSS nÃ y cho báº¡n tá»± Ä‘á»™ng
import './style.css';
---
<html><!-- Trang cá»§a báº¡n á»Ÿ Ä‘Ã¢y --></html>
```

Import CSS files nÃªn hoáº¡t Ä‘á»™ng á»Ÿ báº¥t cá»© Ä‘Ã¢u mÃ  ESM imports Ä‘Æ°á»£c há»— trá»£, bao gá»“m:
- JavaScript files
- TypeScript files
- Astro component frontmatter
- Non-Astro components nhÆ° React, Svelte, vÃ  cÃ¡c components khÃ¡c

Khi má»™t file CSS Ä‘Æ°á»£c import báº±ng phÆ°Æ¡ng phÃ¡p nÃ y, báº¥t ká»³ cÃ¢u lá»‡nh `@import` nÃ o cÅ©ng Ä‘Æ°á»£c resolved vÃ  inlined vÃ o file CSS Ä‘Ã£ import. Táº¥t cáº£ cÃ¡c tham chiáº¿u `url()` cÅ©ng Ä‘Æ°á»£c resolved tÆ°Æ¡ng Ä‘á»‘i vá»›i file nguá»“n, vÃ  báº¥t ká»³ asset Ä‘Æ°á»£c tham chiáº¿u `url()` nÃ o sáº½ Ä‘Æ°á»£c bao gá»“m trong build cuá»‘i cÃ¹ng.

**2. Absolute URL Path**

**VÃ­ dá»¥:** `<link href="/style.css">`
**Khi nÃ o sá»­ dá»¥ng:** Náº¿u file CSS cá»§a báº¡n náº±m bÃªn trong `public/`, vÃ  báº¡n thÃ­ch tá»± táº¡o HTML `link` element.

Báº¡n cÃ³ thá»ƒ tham chiáº¿u báº¥t ká»³ file nÃ o bÃªn trong thÆ° má»¥c `public/` báº±ng absolute URL path trong template component cá»§a mÃ¬nh. ÄÃ¢y lÃ  má»™t tÃ¹y chá»n tá»‘t náº¿u báº¡n muá»‘n tá»± kiá»ƒm soÃ¡t tháº» `<link>` trÃªn trang. Tuy nhiÃªn, cÃ¡ch tiáº¿p cáº­n nÃ y cÅ©ng bá» qua viá»‡c xá»­ lÃ½, bundling vÃ  tá»‘i Æ°u hÃ³a CSS Ä‘Æ°á»£c cung cáº¥p bá»Ÿi Astro khi báº¡n sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p `import` Ä‘Æ°á»£c mÃ´ táº£ á»Ÿ trÃªn.

ChÃºng tÃ´i khuyáº¿n nghá»‹ sá»­ dá»¥ng cÃ¡ch tiáº¿p cáº­n `import` hÆ¡n cÃ¡ch tiáº¿p cáº­n absolute URL vÃ¬ nÃ³ cung cáº¥p hiá»‡u suáº¥t vÃ  tÃ­nh nÄƒng CSS tá»‘t nháº¥t cÃ³ thá»ƒ theo máº·c Ä‘á»‹nh.

#### CÃ¡ch Resolve JavaScript Files

**1. Absolute URL Path**

**VÃ­ dá»¥:** `<script src="/some-external-script.js" />`
**Khi nÃ o sá»­ dá»¥ng:** Náº¿u file JavaScript cá»§a báº¡n náº±m bÃªn trong `public/`.

Báº¡n cÃ³ thá»ƒ tham chiáº¿u báº¥t ká»³ file nÃ o bÃªn trong thÆ° má»¥c `public/` báº±ng absolute URL path trong template component Astro cá»§a mÃ¬nh. ÄÃ¢y lÃ  má»™t tÃ¹y chá»n máº·c Ä‘á»‹nh tá»‘t cho external scripts vÃ¬ nÃ³ cho phÃ©p báº¡n tá»± kiá»ƒm soÃ¡t tháº» `<script>` trÃªn trang.

LÆ°u Ã½ ráº±ng cÃ¡ch tiáº¿p cáº­n nÃ y bá» qua viá»‡c xá»­ lÃ½, bundling vÃ  tá»‘i Æ°u hÃ³a JavaScript Ä‘Æ°á»£c cung cáº¥p bá»Ÿi Astro khi báº¡n sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p `import` Ä‘Æ°á»£c mÃ´ táº£ bÃªn dÆ°á»›i. Tuy nhiÃªn, Ä‘iá»u nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c Æ°a thÃ­ch cho báº¥t ká»³ external script nÃ o Ä‘Ã£ Ä‘Æ°á»£c published vÃ  minified riÃªng biá»‡t tá»« Astro. Náº¿u script cá»§a báº¡n Ä‘Ã£ Ä‘Æ°á»£c táº£i xuá»‘ng tá»« nguá»“n bÃªn ngoÃ i, thÃ¬ phÆ°Æ¡ng phÃ¡p nÃ y cÃ³ láº½ Ä‘Æ°á»£c Æ°a thÃ­ch.

**2. ESM Import qua `<script hoist>`**

**VÃ­ dá»¥:** `<script hoist>import './some-external-script.js';</script>`
**Khi nÃ o sá»­ dá»¥ng:** Náº¿u external script cá»§a báº¡n náº±m bÃªn trong `src/` _vÃ _ nÃ³ há»— trá»£ kiá»ƒu module ESM.

Sá»­ dá»¥ng ESM import bÃªn trong element `<script hoist>` trong template Astro cá»§a báº¡n, vÃ  Astro sáº½ bao gá»“m file JavaScript trong build cuá»‘i cÃ¹ng cá»§a báº¡n. Astro phÃ¡t hiá»‡n nhá»¯ng JavaScript client-side import nÃ y vÃ  sau Ä‘Ã³ build, tá»‘i Æ°u hÃ³a, vÃ  thÃªm JavaScript vÃ o trang tá»± Ä‘á»™ng. ÄÃ¢y lÃ  cÃ¡ch dá»… nháº¥t Ä‘á»ƒ di chuyá»ƒn tá»« `Astro.resolve()` trong khi giá»¯ láº¡i building/bundling tá»± Ä‘á»™ng mÃ  Astro cung cáº¥p.

```astro
<script hoist>
  import './some-external-script.js';
</script>
```

LÆ°u Ã½ ráº±ng Astro sáº½ bundle external script nÃ y vá»›i pháº§n cÃ²n láº¡i cá»§a client-side JavaScript cá»§a báº¡n, vÃ  load nÃ³ trong script context `type="module"`. Má»™t sá»‘ file JavaScript cÅ© cÃ³ thá»ƒ khÃ´ng Ä‘Æ°á»£c viáº¿t cho context `module`, trong trÆ°á»ng há»£p Ä‘Ã³ chÃºng cÃ³ thá»ƒ cáº§n Ä‘Æ°á»£c cáº­p nháº­t Ä‘á»ƒ sá»­ dá»¥ng phÆ°Æ¡ng phÃ¡p nÃ y.

#### CÃ¡ch Resolve Images & Assets khÃ¡c

**1. Absolute URL Path (ÄÆ°á»£c khuyáº¿n nghá»‹)**

**VÃ­ dá»¥:** `<img src="/penguin.png">`
**Khi nÃ o sá»­ dá»¥ng:** Náº¿u asset cá»§a báº¡n náº±m bÃªn trong `public/`.

Náº¿u báº¡n Ä‘áº·t hÃ¬nh áº£nh cá»§a mÃ¬nh bÃªn trong `public/`, báº¡n cÃ³ thá»ƒ tham chiáº¿u chÃºng má»™t cÃ¡ch an toÃ n báº±ng absolute URL path trá»±c tiáº¿p trong template component cá»§a mÃ¬nh. ÄÃ¢y lÃ  cÃ¡ch Ä‘Æ¡n giáº£n nháº¥t Ä‘á»ƒ tham chiáº¿u má»™t asset mÃ  báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng ngÃ y hÃ´m nay, vÃ  nÃ³ Ä‘Æ°á»£c khuyáº¿n nghá»‹ cho háº§u háº¿t ngÆ°á»i dÃ¹ng má»›i báº¯t Ä‘áº§u vá»›i Astro.

**2. ESM Import**

**VÃ­ dá»¥:** `import imgUrl from './penguin.png'`
**Khi nÃ o sá»­ dá»¥ng:** Náº¿u asset cá»§a báº¡n náº±m bÃªn trong thÆ° má»¥c `src/`, vÃ  báº¡n muá»‘n cÃ¡c tÃ­nh nÄƒng tá»‘i Æ°u hÃ³a tá»± Ä‘á»™ng nhÆ° filename hashing.

Äiá»u nÃ y hoáº¡t Ä‘á»™ng bÃªn trong báº¥t ká»³ component JavaScript hoáº·c Astro nÃ o, vÃ  tráº£ vá» URL Ä‘Ã£ resolved cho hÃ¬nh áº£nh cuá»‘i cÃ¹ng. Má»™t khi báº¡n cÃ³ URL Ä‘Ã£ resolved, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng nÃ³ á»Ÿ báº¥t cá»© Ä‘Ã¢u bÃªn trong template component.

```astro
---
// VÃ­ dá»¥: Astro sáº½ bao gá»“m file hÃ¬nh áº£nh nÃ y trong build cuá»‘i cÃ¹ng cá»§a báº¡n
import imgUrl from './penguin.png';
---
<img src={imgUrl} />
```

TÆ°Æ¡ng tá»± nhÆ° cÃ¡ch Astro xá»­ lÃ½ CSS, ESM import cho phÃ©p Astro thá»±c hiá»‡n má»™t sá»‘ tá»‘i Æ°u hÃ³a build Ä‘Æ¡n giáº£n cho báº¡n tá»± Ä‘á»™ng. VÃ­ dá»¥, báº¥t ká»³ asset nÃ o bÃªn trong `src/` Ä‘Æ°á»£c import báº±ng ESM import (vÃ­ dá»¥: `import imgUrl from './penguin.png'`) sáº½ cÃ³ filename cá»§a nÃ³ Ä‘Æ°á»£c hash tá»± Ä‘á»™ng. Äiá»u nÃ y cÃ³ thá»ƒ cho phÃ©p báº¡n cache file má»™t cÃ¡ch tÃ­ch cá»±c hÆ¡n trÃªn server, cáº£i thiá»‡n hiá»‡u suáº¥t ngÆ°á»i dÃ¹ng. Trong tÆ°Æ¡ng lai, Astro cÃ³ thá»ƒ thÃªm nhiá»u tá»‘i Æ°u hÃ³a nhÆ° tháº¿ nÃ y.

**Máº¹o:** Náº¿u báº¡n khÃ´ng thÃ­ch static ESM imports, Astro cÅ©ng há»— trá»£ dynamic ESM imports. ChÃºng tÃ´i chá»‰ khuyáº¿n nghá»‹ tÃ¹y chá»n nÃ y náº¿u báº¡n thÃ­ch cÃº phÃ¡p nÃ y: `<img src={(await import('./penguin.png')).default} />`.

### ÄÃ£ deprecated: Xá»­ lÃ½ `<script>` máº·c Ä‘á»‹nh

TrÆ°á»›c Ä‘Ã¢y, táº¥t cáº£ cÃ¡c element `<script>` Ä‘Æ°á»£c Ä‘á»c tá»« HTML output cuá»‘i cÃ¹ng vÃ  Ä‘Æ°á»£c xá»­ lÃ½ + bundle tá»± Ä‘á»™ng. HÃ nh vi nÃ y khÃ´ng cÃ²n lÃ  máº·c Ä‘á»‹nh. Báº¯t Ä‘áº§u tá»« 0.24, báº¡n pháº£i opt-in Ä‘á»ƒ xá»­ lÃ½ element `<script>` qua thuá»™c tÃ­nh `hoist`. `type="module"` cÅ©ng Ä‘Æ°á»£c yÃªu cáº§u cho cÃ¡c hoisted modules.

```astro
<script>
  // Sáº½ Ä‘Æ°á»£c render vÃ o HTML chÃ­nh xÃ¡c nhÆ° Ä‘Ã£ viáº¿t!
  // ESM imports sáº½ khÃ´ng Ä‘Æ°á»£c resolved tÆ°Æ¡ng Ä‘á»‘i vá»›i file.
</script>
<script type="module" hoist>
  // ÄÆ°á»£c xá»­ lÃ½! ÄÆ°á»£c bundle! ESM imports hoáº¡t Ä‘á»™ng, ngay cáº£ vá»›i npm packages.
</script>
```

## Di chuyá»ƒn sang v0.23

### Lá»—i Sass thiáº¿u

```
Preprocessor dependency "sass" not found. Did you install it?
```

Trong ná»— lá»±c giáº£m kÃ­ch thÆ°á»›c npm install, chÃºng tÃ´i Ä‘Ã£ chuyá»ƒn [Sass](https://sass-lang.com/) ra thÃ nh optional dependency. Náº¿u báº¡n sá»­ dá»¥ng Sass trong dá»± Ã¡n cá»§a mÃ¬nh, báº¡n sáº½ muá»‘n Ä‘áº£m báº£o ráº±ng báº¡n cháº¡y `npm install sass --save-dev` Ä‘á»ƒ lÆ°u nÃ³ nhÆ° má»™t dependency.

### ÄÃ£ deprecated: HTML khÃ´ng escaped

Trong Astro v0.23+, ná»™i dung HTML khÃ´ng escaped trong expressions bÃ¢y giá» Ä‘Ã£ deprecated.
Trong cÃ¡c báº£n phÃ¡t hÃ nh tÆ°Æ¡ng lai, ná»™i dung bÃªn trong expressions sáº½ cÃ³ strings Ä‘Æ°á»£c escaped Ä‘á»ƒ báº£o vá»‡ chá»‘ng láº¡i HTML injection khÃ´ng mong muá»‘n.

```astro del={1} ins={2}
<h1>{title}</h1> <!-- <h1>Hello <strong>World</strong></h1> -->
<h1>{title}</h1> <!-- <h1>Hello &lt;strong&gt;World&lt;/strong&gt;</h1> -->
```

Äá»ƒ tiáº¿p tá»¥c inject HTML khÃ´ng escaped, bÃ¢y giá» báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng `set:html`.

```astro del={1} ins={2}
<h1>{title}</h1>
<h1 set:html={title} />
```

Äá»ƒ trÃ¡nh wrapper element, `set:html` cÃ³ thá»ƒ hoáº¡t Ä‘á»™ng cÃ¹ng vá»›i `<Fragment>`.

```astro del={1} ins={2}
<h1>{title}!</h1>
<h1><Fragment set:html={title}>!</h1>
```

Báº¡n cÅ©ng cÃ³ thá»ƒ báº£o vá»‡ chá»‘ng láº¡i HTML injection khÃ´ng mong muá»‘n vá»›i `set:text`.

```astro
<h1 set:text={title} /> <!-- <h1>Hello &lt;strong&gt;World&lt;/strong&gt;</h1> -->
```

## Di chuyá»ƒn sang v0.21

### Vite

Báº¯t Ä‘áº§u tá»« v0.21, Astro Ä‘Æ°á»£c build vá»›i [Vite].
Káº¿t quáº£ lÃ , cÃ¡c cáº¥u hÃ¬nh Ä‘Æ°á»£c viáº¿t trong `snowpack.config.mjs` nÃªn Ä‘Æ°á»£c chuyá»ƒn vÃ o `astro.config.mjs`.

```js
// @ts-check

/** @type {import('astro').AstroUserConfig} */
export default {
  renderers: [],
  vite: {
    plugins: [],
  },
};
```

Äá»ƒ tÃ¬m hiá»ƒu thÃªm vá» cáº¥u hÃ¬nh Vite, vui lÃ²ng truy cáº­p [hÆ°á»›ng dáº«n cáº¥u hÃ¬nh](https://vite.dev/config/) cá»§a há».

#### Vite Plugins

Trong Astro v0.21+, Vite plugins cÃ³ thá»ƒ Ä‘Æ°á»£c cáº¥u hÃ¬nh trong `astro.config.mjs`.

```js ins={4-6}
import { imagetools } from 'vite-imagetools';

export default {
  vite: {
    plugins: [imagetools()],
  },
};
```

Äá»ƒ tÃ¬m hiá»ƒu thÃªm vá» Vite plugins, vui lÃ²ng truy cáº­p [hÆ°á»›ng dáº«n plugin](https://vite.dev/guide/using-plugins.html) cá»§a há».

#### Thay Ä‘á»•i Vite cho Renderers

Trong Astro v0.21+, plugins bÃ¢y giá» nÃªn sá»­ dá»¥ng `viteConfig()`.

```js del={8-9} ins={2,10-23}
// renderer-svelte/index.js
import { svelte } from '@sveltejs/vite-plugin-svelte';

export default {
  name: '@astrojs/renderer-svelte',
  client: './client.js',
  server: './server.js',
  snowpackPlugin: '@snowpack/plugin-svelte',
  snowpackPluginOptions: { compilerOptions: { hydratable: true } },
  viteConfig() {
    return {
      optimizeDeps: {
        include: ['@astrojs/renderer-svelte/client.js', 'svelte', 'svelte/internal'],
        exclude: ['@astrojs/renderer-svelte/server.js'],
      },
      plugins: [
        svelte({
          emitCss: true,
          compilerOptions: { hydratable: true },
        }),
      ],
    };
  },
}
```

Äá»ƒ tÃ¬m hiá»ƒu thÃªm vá» Vite plugins, vui lÃ²ng truy cáº­p [hÆ°á»›ng dáº«n plugin](https://vite.dev/guide/using-plugins.html) cá»§a há».

:::note
Trong cÃ¡c báº£n phÃ¡t hÃ nh trÆ°á»›c, nhá»¯ng Ä‘iá»u nÃ y Ä‘Æ°á»£c cáº¥u hÃ¬nh vá»›i `snowpackPlugin` hoáº·c `snowpackPluginOptions`.
:::

### Aliasing

Trong Astro v0.21+, import aliases cÃ³ thá»ƒ Ä‘Æ°á»£c thÃªm trong `tsconfig.json`.

```json add={4-6}
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/components/*": ["src/components/*"]
    }
  }
}
```

### File Extensions trong Imports

Trong Astro v0.21+, cÃ¡c file cáº§n Ä‘Æ°á»£c tham chiáº¿u báº±ng extension thá»±c táº¿ cá»§a chÃºng, chÃ­nh xÃ¡c nhÆ° nÃ³ cÃ³ trÃªn disk. Trong vÃ­ dá»¥ nÃ y, `Div.tsx` sáº½ cáº§n Ä‘Æ°á»£c tham chiáº¿u nhÆ° `Div.tsx`, khÃ´ng pháº£i `Div.jsx`.

```js del={1} ins={2}
import Div from './Div.jsx' // Astro v0.20
import Div from './Div.tsx' // Astro v0.21
```

Thay Ä‘á»•i tÆ°Æ¡ng tá»± nÃ y Ã¡p dá»¥ng cho file compile-to-css nhÆ° `Div.scss`:

```astro del={1} ins={2}
<link rel="stylesheet" href={Astro.resolve('./Div.css')}>
<link rel="stylesheet" href={Astro.resolve('./Div.scss')}>
```

### ÄÃ£ xÃ³a: Components trong Frontmatter

TrÆ°á»›c Ä‘Ã¢y, báº¡n cÃ³ thá»ƒ táº¡o cÃ¡c mini Astro Components bÃªn trong Astro Frontmatter, sá»­ dá»¥ng cÃº phÃ¡p JSX thay vÃ¬ cÃº phÃ¡p component cá»§a Astro. Äiá»u nÃ y luÃ´n lÃ  má»™t hack, nhÆ°ng trong compiler má»›i nÃ³ trá»Ÿ nÃªn khÃ´ng thá»ƒ há»— trá»£. ChÃºng tÃ´i hy vá»ng sáº½ giá»›i thiá»‡u láº¡i tÃ­nh nÄƒng nÃ y trong má»™t báº£n phÃ¡t hÃ nh tÆ°Æ¡ng lai cá»§a Astro báº±ng cÃ¡ch sá»­ dá»¥ng API khÃ¡c, khÃ´ng pháº£i JSX.

Äá»ƒ di chuyá»ƒn sang v0.21+, vui lÃ²ng chuyá»ƒn Ä‘á»•i táº¥t cáº£ JSX Astro components (nghÄ©a lÃ , báº¥t ká»³ Astro component nÃ o Ä‘Æ°á»£c táº¡o bÃªn trong frontmatter cá»§a component khÃ¡c) thÃ nh standalone components.

### Thay Ä‘á»•i Styling

#### Autoprefixer

Autoprefixer khÃ´ng cÃ²n cháº¡y theo máº·c Ä‘á»‹nh. Äá»ƒ báº­t:

<Steps>
1. CÃ i Ä‘áº·t phiÃªn báº£n má»›i nháº¥t (`npm install autoprefixer`)

2. Táº¡o file `postcss.config.cjs` táº¡i root cá»§a dá»± Ã¡n vá»›i:
   ```js
   module.exports = {
     plugins: {
       autoprefixer: {},
     },
   };
   ```
</Steps>

#### Tailwind CSS

Äáº£m báº£o báº¡n Ä‘Ã£ cÃ i Ä‘áº·t PostCSS. Äiá»u nÃ y lÃ  tÃ¹y chá»n trong cÃ¡c báº£n phÃ¡t hÃ nh trÆ°á»›c, nhÆ°ng bÃ¢y giá» lÃ  báº¯t buá»™c:

<Steps>
1. CÃ i Ä‘áº·t phiÃªn báº£n má»›i nháº¥t cá»§a postcss (`npm install -D postcss`)

2. Táº¡o file `postcss.config.cjs` táº¡i root cá»§a dá»± Ã¡n vá»›i:
   ```js
   module.exports = {
     plugins: {
       tailwindcss: {},
     },
   };
   ```
   Äá»ƒ biáº¿t thÃªm thÃ´ng tin, Ä‘á»c [tÃ i liá»‡u Tailwind CSS](https://tailwindcss.com/docs/installation#add-tailwind-as-a-post-css-plugin)
</Steps>

### Váº¥n Ä‘á» Ä‘Ã£ biáº¿t

#### Imports á»Ÿ trÃªn cÃ¹ng

Trong Astro v0.21+, má»™t bug Ä‘Ã£ Ä‘Æ°á»£c giá»›i thiá»‡u yÃªu cáº§u imports bÃªn trong components pháº£i á»Ÿ trÃªn cÃ¹ng frontmatter cá»§a báº¡n.

```astro
---
import Component from '../components/Component.astro'
const whereShouldIPutMyImports = "on top!"
---
```

[vite]: https://vite.dev