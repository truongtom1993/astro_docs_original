---
title: Chia s·∫ª tr·∫°ng th√°i gi·ªØa c√°c Island
description: T√¨m hi·ªÉu c√°ch chia s·∫ª tr·∫°ng th√°i gi·ªØa c√°c component framework v·ªõi Nano Stores.
i18nReady: true
type: recipe
---

import UIFrameworkTabs from '~/components/tabs/UIFrameworkTabs.astro'
import LoopingVideo from '~/components/LoopingVideo.astro'
import JavascriptFlavorTabs from '~/components/tabs/JavascriptFlavorTabs.astro'
import RecipeLinks from "~/components/RecipeLinks.astro"

Khi x√¢y d·ª±ng m·ªôt website Astro v·ªõi [ki·∫øn tr√∫c islands / partial hydration](/vi/concepts/islands/), b·∫°n c√≥ th·ªÉ g·∫∑p ph·∫£i v·∫•n ƒë·ªÅ n√†y: **T√¥i mu·ªën chia s·∫ª tr·∫°ng th√°i gi·ªØa c√°c component c·ªßa m√¨nh.**

C√°c framework UI nh∆∞ React ho·∫∑c Vue c√≥ th·ªÉ khuy·∫øn kh√≠ch s·ª≠ d·ª•ng ["context" providers](https://react.dev/learn/passing-data-deeply-with-context) cho c√°c component kh√°c s·ª≠ d·ª•ng. Tuy nhi√™n, khi [hydrating m·ªôt ph·∫ßn c√°c component](/vi/guides/framework-components/#hydrating-interactive-components) trong Astro ho·∫∑c Markdown, b·∫°n kh√¥ng th·ªÉ d√πng c√°c context wrapper n√†y.

Astro ƒë·ªÅ xu·∫•t m·ªôt gi·∫£i ph√°p kh√°c cho vi·ªác l∆∞u tr·ªØ chia s·∫ª ph√≠a client: [**Nano Stores**](https://github.com/nanostores/nanostores).

<RecipeLinks slugs={["en/recipes/sharing-state"]} />

## T·∫°i sao n√™n d√πng Nano Stores?

Th∆∞ vi·ªán [Nano Stores](https://github.com/nanostores/nanostores) cho ph√©p b·∫°n t·∫°o c√°c store m√† b·∫•t c·ª© component n√†o c≈©ng c√≥ th·ªÉ t∆∞∆°ng t√°c. Ch√∫ng t√¥i ƒë·ªÅ xu·∫•t Nano Stores v√¨:
- **Ch√∫ng r·∫•t nh·∫π.** Nano Stores ch·ªâ t·∫£i v·ªÅ l∆∞·ª£ng JS t·ªëi thi·ªÉu b·∫°n c·∫ßn (d∆∞·ªõi 1 KB) m√† kh√¥ng c√≥ ph·ª• thu·ªôc n√†o.
- **Kh√¥ng ph·ª• thu·ªôc framework.** ƒêi·ªÅu n√†y c√≥ nghƒ©a vi·ªác chia s·∫ª tr·∫°ng th√°i gi·ªØa c√°c framework s·∫Ω li·ªÅn m·∫°ch! Astro ƒë∆∞·ª£c x√¢y d·ª±ng d·ª±a tr√™n s·ª± linh ho·∫°t, v√¨ v·∫≠y ch√∫ng t√¥i y√™u th√≠ch c√°c gi·∫£i ph√°p mang l·∫°i tr·∫£i nghi·ªám ph√°t tri·ªÉn nh·∫•t qu√°n b·∫•t k·ªÉ b·∫°n th√≠ch framework n√†o.

Tuy nhi√™n, v·∫´n c√≤n m·ªôt s·ªë l·ª±a ch·ªçn thay th·∫ø m√† b·∫°n c√≥ th·ªÉ tham kh·∫£o, bao g·ªìm:
- [Store t√≠ch h·ª£p s·∫µn c·ªßa Svelte](https://svelte.dev/tutorial/writable-stores)
- [Solid signals](https://www.solidjs.com/docs/latest) b√™n ngo√†i context component
- [API reactivity c·ªßa Vue](https://vuejs.org/guide/scaling-up/state-management.html#simple-state-management-with-reactivity-api)
- [G·ª≠i custom browser event](https://developer.mozilla.org/en-US/docs/Web/Events/Creating_and_triggering_events) gi·ªØa c√°c component

:::note[FAQ]

<details>
<summary>**üôã T√¥i c√≥ th·ªÉ d√πng Nano Stores trong file `.astro` ho·∫∑c c√°c component ph√≠a server kh√°c kh√¥ng?**</summary>

Nano Stores c√≥ th·ªÉ ƒë∆∞·ª£c d√πng trong th·∫ª `<script>` ƒë·ªÉ [chia s·∫ª tr·∫°ng th√°i gi·ªØa c√°c component `.astro`](/vi/recipes/sharing-state/). Tuy nhi√™n, s·ª≠ d·ª•ng Nano Stores trong frontmatter c·ªßa c√°c component ph√≠a server l√† kh√¥ng n√™n v√¨ c√°c h·∫°n ch·∫ø sau:
- Ghi d·ªØ li·ªáu v√†o store t·ª´ file `.astro` ho·∫∑c [component kh√¥ng hydrate](/vi/guides/framework-components/#hydrating-interactive-components) s·∫Ω _kh√¥ng_ ·∫£nh h∆∞·ªüng ƒë·∫øn gi√° tr·ªã nh·∫≠n ƒë∆∞·ª£c b·ªüi [component ph√≠a client](/vi/reference/directives-reference/#client-directives).
- B·∫°n kh√¥ng th·ªÉ truy·ªÅn m·ªôt Nano Store nh∆∞ m·ªôt "prop" cho c√°c component ph√≠a client.
- B·∫°n kh√¥ng th·ªÉ subscribe v√†o s·ª± thay ƒë·ªïi store t·ª´ file `.astro` v√¨ component Astro kh√¥ng t·ª± ƒë·ªông render l·∫°i.

N·∫øu b·∫°n hi·ªÉu r√µ c√°c h·∫°n ch·∫ø n√†y v√† v·∫´n c√≥ nhu c·∫ßu, b·∫°n c√≥ th·ªÉ th·ª≠ d√πng Nano Stores! H√£y nh·ªõ Nano Stores ƒë∆∞·ª£c x√¢y d·ª±ng ƒë·ªÉ ph·∫£n ·ª©ng v·ªõi thay ƒë·ªïi tr√™n **client** l√† ch·ªß y·∫øu.

</details>

<details>
<summary>**üôã Store c·ªßa Svelte so v·ªõi Nano Stores nh∆∞ th·∫ø n√†o?**</summary>

**Nano Stores v√† [store c·ªßa Svelte](https://svelte.dev/tutorial/writable-stores) r·∫•t gi·ªëng nhau!** Th·ª±c t·∫ø, [nanostores cho ph√©p b·∫°n d√πng c√∫ ph√°p r√∫t g·ªçn `$`](https://github.com/nanostores/nanostores#svelte) ƒë·ªÉ subscribe gi·ªëng nh∆∞ Svelte.

N·∫øu b·∫°n mu·ªën tr√°nh th∆∞ vi·ªán b√™n th·ª© ba, [store c·ªßa Svelte](https://svelte.dev/tutorial/writable-stores) l√† m·ªôt c√¥ng c·ª• tuy·ªát v·ªùi ƒë·ªÉ giao ti·∫øp gi·ªØa c√°c ƒë·∫£o. Tuy nhi√™n, b·∫°n c√≥ th·ªÉ th√≠ch Nano Stores n·∫øu a) b·∫°n th√≠ch c√°c add-on cho ["object"](https://github.com/nanostores/nanostores#maps) v√† [state async](https://github.com/nanostores/nanostores#lazy-stores), ho·∫∑c b) b·∫°n mu·ªën giao ti·∫øp gi·ªØa Svelte v√† c√°c framework UI kh√°c nh∆∞ Preact ho·∫∑c Vue.
</details>

<details>
<summary>**üôã Solid signals so v·ªõi Nano Stores ra sao?**</summary>

N·∫øu b·∫°n ƒë√£ d√πng Solid m·ªôt th·ªùi gian, b·∫°n c√≥ th·ªÉ ƒë√£ th·ª≠ di chuy·ªÉn [signals](https://www.solidjs.com/docs/latest#createsignal) ho·∫∑c [store](https://www.solidjs.com/docs/latest#createstore) ra ngo√†i component. ƒê√¢y l√† c√°ch tuy·ªát v·ªùi ƒë·ªÉ chia s·∫ª tr·∫°ng th√°i gi·ªØa c√°c ƒë·∫£o Solid! H√£y th·ª≠ export signals t·ª´ m·ªôt file chung:

```js
// sharedStore.js
import { createSignal } from 'solid-js';

export const sharedCount = createSignal(0);
```
...v√† t·∫•t c·∫£ component import `sharedCount` s·∫Ω chia s·∫ª c√πng m·ªôt tr·∫°ng th√°i. D√π c√°ch n√†y ho·∫°t ƒë·ªông t·ªët, b·∫°n c√≥ th·ªÉ th√≠ch Nano Stores n·∫øu a) b·∫°n th√≠ch c√°c add-on cho ["object"](https://github.com/nanostores/nanostores#maps) v√† [state async](https://github.com/nanostores/nanostores#lazy-stores), ho·∫∑c b) mu·ªën giao ti·∫øp gi·ªØa Solid v√† c√°c framework UI kh√°c nh∆∞ Preact ho·∫∑c Vue.
</details>
:::

## C√†i ƒë·∫∑t Nano Stores

ƒê·ªÉ b·∫Øt ƒë·∫ßu, h√£y c√†i ƒë·∫∑t Nano Stores c√πng package helper cho framework UI b·∫°n y√™u th√≠ch:

<UIFrameworkTabs>
  <Fragment slot="preact">
  ```shell
  npm install nanostores @nanostores/preact
  ```
  </Fragment>
  <Fragment slot="react">
  ```shell
  npm install nanostores @nanostores/react
  ```
  </Fragment>
  <Fragment slot="solid">
  ```shell
  npm install nanostores @nanostores/solid
  ```
  </Fragment>
  <Fragment slot="svelte">
  ```shell
  npm install nanostores
  ```
  :::note
  Kh√¥ng c√≥ package helper ·ªü ƒë√¢y! Nano Stores c√≥ th·ªÉ d√πng nh∆∞ store m·∫∑c ƒë·ªãnh c·ªßa Svelte.
  :::
  </Fragment>
  <Fragment slot="vue">
  ```shell
  npm install nanostores @nanostores/vue
  ```
  </Fragment>
 
</UIFrameworkTabs>

B·∫°n c√≥ th·ªÉ ƒë·ªçc ti·∫øp [h∆∞·ªõng d·∫´n s·ª≠ d·ª•ng Nano Stores](https://github.com/nanostores/nanostores#guide), ho·∫∑c theo d√µi v√≠ d·ª• d∆∞·ªõi ƒë√¢y!

## V√≠ d·ª• s·ª≠ d·ª•ng - gi·ªè h√†ng ecommerce

Gi·∫£ s·ª≠ ch√∫ng ta x√¢y d·ª±ng m·ªôt giao di·ªán ecommerce ƒë∆°n gi·∫£n v·ªõi ba ph·∫ßn t·ª≠ t∆∞∆°ng t√°c:
- Form th√™m s·∫£n ph·∫©m v√†o gi·ªè
- Flyout gi·ªè h√†ng hi·ªÉn th·ªã c√°c s·∫£n ph·∫©m ƒë√£ th√™m
- N√∫t b·∫≠t/t·∫Øt flyout gi·ªè h√†ng

<LoopingVideo sources={[{ src: '/videos/stores-example.mp4', type: 'video/mp4' }]} />

_[**Th·ª≠ v√≠ d·ª• ho√†n ch·ªânh**](https://github.com/withastro/astro/tree/main/examples/with-nanostores) tr√™n m√°y b·∫°n ho·∫∑c tr·ª±c tuy·∫øn v·ªõi StackBlitz._

File Astro c∆° b·∫£n c·ªßa b·∫°n c√≥ th·ªÉ nh∆∞ sau:

```astro
---
// src/pages/index.astro
import CartFlyoutToggle from '../components/CartFlyoutToggle';
import CartFlyout from '../components/CartFlyout';
import AddToCartForm from '../components/AddToCartForm';
---

<!DOCTYPE html>
<html lang="en">
<head>...</head>
<body>
  <header>
    <nav>
      <a href="/">Astro storefront</a>
      <CartFlyoutToggle client:load />
    </nav>
  </header>
  <main>
    <AddToCartForm client:load>
    <!-- ... -->
    </AddToCartForm>
  </main>
  <CartFlyout client:load />
</body>
</html>
```

### S·ª≠ d·ª•ng "atoms"

H√£y b·∫Øt ƒë·∫ßu b·∫±ng vi·ªác m·ªü `CartFlyout` b·∫•t c·ª© khi n√†o `CartFlyoutToggle` ƒë∆∞·ª£c nh·∫•n.

ƒê·∫ßu ti√™n, t·∫°o m·ªôt file JS ho·∫∑c TS m·ªõi ƒë·ªÉ ch·ª©a store. Ta s·∫Ω d√πng m·ªôt ["atom"](https://github.com/nanostores/nanostores#atoms):

```js
// src/cartStore.js
import { atom } from 'nanostores';

export const isCartOpen = atom(false);
```

Gi·ªù, ch√∫ng ta c√≥ th·ªÉ import store n√†y v√†o b·∫•t k·ª≥ file n√†o c·∫ßn ƒë·ªçc ho·∫∑c ghi. B·∫Øt ƒë·∫ßu k·∫øt n·ªëi v·ªõi `CartFlyoutToggle`:

<UIFrameworkTabs>
<Fragment slot="preact">
```jsx
// src/components/CartFlyoutToggle.jsx
import { useStore } from '@nanostores/preact';
import { isCartOpen } from '../cartStore';

export default function CartButton() {
  // ƒë·ªçc gi√° tr·ªã store v·ªõi hook `useStore`
  const $isCartOpen = useStore(isCartOpen);
  // ghi v√†o store b·∫±ng `.set`
  return (
    <button onClick={() => isCartOpen.set(!$isCartOpen)}>Cart</button>
  )
}
```
</Fragment>
<Fragment slot="react">
```jsx
// src/components/CartFlyoutToggle.jsx
import { useStore } from '@nanostores/react';
import { isCartOpen } from '../cartStore';

export default function CartButton() {
  // ƒë·ªçc gi√° tr·ªã store v·ªõi hook `useStore`
  const $isCartOpen = useStore(isCartOpen);
  // ghi v√†o store b·∫±ng `.set`
  return (
    <button onClick={() => isCartOpen.set(!$isCartOpen)}>Cart</button>
  )
}
```
</Fragment>
<Fragment slot="solid">
```jsx
// src/components/CartFlyoutToggle.jsx
import { useStore } from '@nanostores/solid';
import { isCartOpen } from '../cartStore';

export default function CartButton() {
  // ƒë·ªçc gi√° tr·ªã store v·ªõi hook `useStore`
  const $isCartOpen = useStore(isCartOpen);
  // ghi v√†o store b·∫±ng `.set`
  return (
    <button onClick={() => isCartOpen.set(!$isCartOpen())}>Cart</button>
  )
}
```
</Fragment>
<Fragment slot="svelte">
```svelte
<!--src/components/CartFlyoutToggle.svelte-->
<script>
  import { isCartOpen } from '../cartStore';
</script>

<!--d√πng "$" ƒë·ªÉ ƒë·ªçc gi√° tr·ªã store-->
<button on:click={() => isCartOpen.set(!$isCartOpen)}>Cart</button>
```
</Fragment>
<Fragment slot="vue">
```vue
<!--src/components/CartFlyoutToggle.vue-->
<template>
  <!--ghi v√†o store ƒë√£ import b·∫±ng `.set`-->
  <button @click="isCartOpen.set(!$isCartOpen)">Cart</button>
</template>

<script setup>
  import { isCartOpen } from '../cartStore';
  import { useStore } from '@nanostores/vue';

  // ƒë·ªçc gi√° tr·ªã store v·ªõi hook `useStore`
  const $isCartOpen = useStore(isCartOpen);
</script>
```
</Fragment>

</UIFrameworkTabs>

Sau ƒë√≥, ch√∫ng ta c√≥ th·ªÉ ƒë·ªçc `isCartOpen` t·ª´ component `CartFlyout`:

<UIFrameworkTabs>
<Fragment slot="preact">
```jsx
// src/components/CartFlyout.jsx
import { useStore } from '@nanostores/preact';
import { isCartOpen } from '../cartStore';

export default function CartFlyout() {
  const $isCartOpen = useStore(isCartOpen);

  return $isCartOpen ? <aside>...</aside> : null;
}
```
</Fragment>
<Fragment slot="react">
```jsx
// src/components/CartFlyout.jsx
import { useStore } from '@nanostores/react';
import { isCartOpen } from '../cartStore';

export default function CartFlyout() {
  const $isCartOpen = useStore(isCartOpen);

  return $isCartOpen ? <aside>...</aside> : null;
}
```
</Fragment>
<Fragment slot="solid">
```jsx
// src/components/CartFlyout.jsx
import { useStore } from '@nanostores/solid';
import { isCartOpen } from '../cartStore';

export default function CartFlyout() {
  const $isCartOpen = useStore(isCartOpen);

  return $isCartOpen() ? <aside>...</aside> : null;
}
```
</Fragment>
<Fragment slot="svelte">
```svelte
<!--src/components/CartFlyout.svelte-->
<script>
  import { isCartOpen } from '../cartStore';
</script>

{#if $isCartOpen}
<aside>...</aside>
{/if}
```
</Fragment>
<Fragment slot="vue">
```vue
<!--src/components/CartFlyout.vue-->
<template>
  <aside v-if="$isCartOpen">...</aside>
</template>

<script setup>
  import { isCartOpen } from '../cartStore';
  import { useStore } from '@nanostores/vue';

  const $isCartOpen = useStore(isCartOpen);
</script>
```
</Fragment>

</UIFrameworkTabs>

### S·ª≠ d·ª•ng "maps"

:::tip
**[Maps](https://github.com/nanostores/nanostores#maps) l√† l·ª±a ch·ªçn tuy·ªát v·ªùi cho object th∆∞·ªùng xuy√™n thay ƒë·ªïi!** Ngo√†i c√°c h√†m `get()` v√† `set()` nh∆∞ `atom`, b·∫°n c√≤n c√≥ `.setKey()` ƒë·ªÉ c·∫≠p nh·∫≠t nhanh gi√° tr·ªã t·ª´ng key trong object.
:::

Gi·ªù, h√£y theo d√µi c√°c s·∫£n ph·∫©m trong gi·ªè. ƒê·ªÉ tr√°nh tr√πng l·∫∑p v√† theo d√µi "s·ªë l∆∞·ª£ng", ta s·∫Ω l∆∞u gi·ªè h√†ng l√† m·ªôt object v·ªõi id s·∫£n ph·∫©m l√†m key. Ta s·∫Ω d√πng [Map](https://github.com/nanostores/nanostores#maps) cho vi·ªác n√†y.

Th√™m store `cartItem` v√†o `cartStore.js` t·ª´ b∆∞·ªõc tr∆∞·ªõc. B·∫°n c≈©ng c√≥ th·ªÉ chuy·ªÉn sang file TypeScript ƒë·ªÉ ƒë·ªãnh nghƒ©a c·∫•u tr√∫c n·∫øu mu·ªën.

<JavascriptFlavorTabs>
  <Fragment slot="js">
  ```js
  // src/cartStore.js
  import { atom, map } from 'nanostores';

  export const isCartOpen = atom(false);

  /**
   * @typedef {Object} CartItem
   * @property {string} id
   * @property {string} name
   * @property {string} imageSrc
   * @property {number} quantity
   */

  /** @type {import('nanostores').MapStore<Record<string, CartItem>>} */
  export const cartItems = map({});
  ```
  </Fragment>
  <Fragment slot="ts">
  ```ts
  // src/cartStore.ts
  import { atom, map } from 'nanostores';

  export const isCartOpen = atom(false);

  export type CartItem = {
    id: string;
    name: string;
    imageSrc: string;
    quantity: number;
  }

  export const cartItems = map<Record<string, CartItem>>({});
  ```
  </Fragment>
</JavascriptFlavorTabs>

Gi·ªù h√£y export m·ªôt h√†m helper `addCartItem` cho c√°c component s·ª≠ d·ª•ng.
- **N·∫øu s·∫£n ph·∫©m ch∆∞a c√≥ trong gi·ªè**, th√™m v√†o v·ªõi s·ªë l∆∞·ª£ng kh·ªüi ƒë·∫ßu l√† 1.
- **N·∫øu s·∫£n ph·∫©m ƒë√£ c√≥**, tƒÉng s·ªë l∆∞·ª£ng l√™n 1.

<JavascriptFlavorTabs>
  <Fragment slot="js">
  ```js
  // src/cartStore.js
  ...
  export function addCartItem({ id, name, imageSrc }) {
    const existingEntry = cartItems.get()[id];
    if (existingEntry) {
      cartItems.setKey(id, {
        ...existingEntry,
        quantity: existingEntry.quantity + 1,
      })
    } else {
      cartItems.setKey(
        id,
        { id, name, imageSrc, quantity: 1 }
      );
    }
  }
  ```
  </Fragment>
  <Fragment slot="ts">
  ```ts
  // src/cartStore.ts
  ...
  type ItemDisplayInfo = Pick<CartItem, 'id' | 'name' | 'imageSrc'>;
  export function addCartItem({ id, name, imageSrc }: ItemDisplayInfo) {
    const existingEntry = cartItems.get()[id];
    if (existingEntry) {
      cartItems.setKey(id, {
        ...existingEntry,
        quantity: existingEntry.quantity + 1,
      });
    } else {
      cartItems.setKey(
        id,
        { id, name, imageSrc, quantity: 1 }
      );
    }
  }
  ```
  </Fragment>
</JavascriptFlavorTabs>

:::note
<details>

<summary>**üôã T·∫°i sao d√πng `.get()` ·ªü ƒë√¢y thay v√¨ helper `useStore`?**</summary>

B·∫°n c√≥ th·ªÉ th·∫•y ch√∫ng ta g·ªçi `cartItems.get()` ·ªü ƒë√¢y, thay v√¨ d√πng helper `useStore` nh∆∞ v√≠ d·ª• React / Preact / Solid / Vue. ƒê√≥ l√† v√¨ **useStore d√πng ƒë·ªÉ trigger render l·∫°i component.** N√≥i c√°ch kh√°c, `useStore` n√™n d√πng khi gi√° tr·ªã store c·∫ßn render ra UI. V√¨ ·ªü ƒë√¢y ta ƒë·ªçc gi√° tr·ªã khi m·ªôt **s·ª± ki·ªán** x·∫£y ra (`addToCart`), m√† kh√¥ng c·∫ßn render gi√° tr·ªã ƒë√≥, n√™n kh√¥ng c·∫ßn `useStore`.
</details>
:::

Sau khi c√≥ store, ta c√≥ th·ªÉ g·ªçi h√†m n√†y trong `AddToCartForm` m·ªói khi form submit. Ta c≈©ng s·∫Ω m·ªü flyout gi·ªè h√†ng ƒë·ªÉ b·∫°n xem to√†n b·ªô gi·ªè.

<UIFrameworkTabs>
<Fragment slot="preact">
```jsx
// src/components/AddToCartForm.jsx
import { addCartItem, isCartOpen } from '../cartStore';

export default function AddToCartForm({ children }) {
  // th√¥ng tin s·∫£n ph·∫©m m·∫´u
  const hardcodedItemInfo = {
    id: 'astronaut-figurine',
    name: 'Astronaut Figurine',
    imageSrc: '/images/astronaut-figurine.png',
  }

  function addToCart(e) {
    e.preventDefault();
    isCartOpen.set(true);
    addCartItem(hardcodedItemInfo);
  }

  return (
    <form onSubmit={addToCart}>
      {children}
    </form>
  )
}
```
</Fragment>
<Fragment slot="react">
```jsx
// src/components/AddToCartForm.jsx
import { addCartItem, isCartOpen } from '../cartStore';

export default function AddToCartForm({ children }) {
  // th√¥ng tin s·∫£n ph·∫©m m·∫´u
  const hardcodedItemInfo = {
    id: 'astronaut-figurine',
    name: 'Astronaut Figurine',
    imageSrc: '/images/astronaut-figurine.png',
  }

  function addToCart(e) {
    e.preventDefault();
    isCartOpen.set(true);
    addCartItem(hardcodedItemInfo);
  }

  return (
    <form onSubmit={addToCart}>
      {children}
    </form>
  )
}
```
</Fragment>
<Fragment slot="solid">
```jsx
// src/components/AddToCartForm.jsx
import { addCartItem, isCartOpen } from '../cartStore';

export default function AddToCartForm({ children }) {
  // th√¥ng tin s·∫£n ph·∫©m m·∫´u
  const hardcodedItemInfo = {
    id: 'astronaut-figurine',
    name: 'Astronaut Figurine',
    imageSrc: '/images/astronaut-figurine.png',
  }

  function addToCart(e) {
    e.preventDefault();
    isCartOpen.set(true);
    addCartItem(hardcodedItemInfo);
  }

  return (
    <form onSubmit={addToCart}>
      {children}
    </form>
  )
}
```
</Fragment>
<Fragment slot="svelte">
```svelte
<!--src/components/AddToCartForm.svelte-->
<form on:submit|preventDefault={addToCart}>
  <slot></slot>
</form>

<script>
  import { addCartItem, isCartOpen } from '../cartStore';

  // th√¥ng tin s·∫£n ph·∫©m m·∫´u
  const hardcodedItemInfo = {
    id: 'astronaut-figurine',
    name: 'Astronaut Figurine',
    imageSrc: '/images/astronaut-figurine.png',
  }

  function addToCart() {
    isCartOpen.set(true);
    addCartItem(hardcodedItemInfo);
  }
</script>
```
</Fragment>
<Fragment slot="vue">
```vue
<!--src/components/AddToCartForm.vue-->
<template>
  <form @submit="addToCart">
    <slot></slot>
  </form>
</template>

<script setup>
  import { addCartItem, isCartOpen } from '../cartStore';

  // th√¥ng tin s·∫£n ph·∫©m m·∫´u
  const hardcodedItemInfo = {
    id: 'astronaut-figurine',
    name: 'Astronaut Figurine',
    imageSrc: '/images/astronaut-figurine.png',
  }

  function addToCart(e) {
    e.preventDefault();
    isCartOpen.set(true);
    addCartItem(hardcodedItemInfo);
  }
</script>
```
</Fragment>

</UIFrameworkTabs>

Cu·ªëi c√πng, render c√°c s·∫£n ph·∫©m trong gi·ªè ra `CartFlyout`:

<UIFrameworkTabs>
<Fragment slot="preact">
```jsx
// src/components/CartFlyout.jsx
import { useStore } from '@nanostores/preact';
import { isCartOpen, cartItems } from '../cartStore';

export default function CartFlyout() {
  const $isCartOpen = useStore(isCartOpen);
  const $cartItems = useStore(cartItems);

  return $isCartOpen ? (
    <aside>
      {Object.values($cartItems).length ? (
        <ul>
          {Object.values($cartItems).map(cartItem => (
            <li>
              <img src={cartItem.imageSrc} alt={cartItem.name} />
              <h3>{cartItem.name}</h3>
              <p>S·ªë l∆∞·ª£ng: {cartItem.quantity}</p>
            </li>
          ))}
        </ul>
      ) : <p>Gi·ªè h√†ng c·ªßa b·∫°n tr·ªëng!</p>}
    </aside>
  ) : null;
}
```
</Fragment>
<Fragment slot="react">
```jsx
// src/components/CartFlyout.jsx
import { useStore } from '@nanostores/react';
import { isCartOpen, cartItems } from '../cartStore';

export default function CartFlyout() {
  const $isCartOpen = useStore(isCartOpen);
  const $cartItems = useStore(cartItems);

  return $isCartOpen ? (
    <aside>
      {Object.values($cartItems).length ? (
        <ul>
          {Object.values($cartItems).map(cartItem => (
            <li>
              <img src={cartItem.imageSrc} alt={cartItem.name} />
              <h3>{cartItem.name}</h3>
              <p>S·ªë l∆∞·ª£ng: {cartItem.quantity}</p>
            </li>
          ))}
        </ul>
      ) : <p>Gi·ªè h√†ng c·ªßa b·∫°n tr·ªëng!</p>}
    </aside>
  ) : null;
}
```
</Fragment>
<Fragment slot="solid">
```jsx
// src/components/CartFlyout.jsx
import { useStore } from '@nanostores/solid';
import { isCartOpen, cartItems } from '../cartStore';

export default function CartFlyout() {
  const $isCartOpen = useStore(isCartOpen);
  const $cartItems = useStore(cartItems);

  return $isCartOpen() ? (
    <aside>
      {Object.values($cartItems()).length ? (
        <ul>
          {Object.values($cartItems()).map(cartItem => (
            <li>
              <img src={cartItem.imageSrc} alt={cartItem.name} />
              <h3>{cartItem.name}</h3>
              <p>S·ªë l∆∞·ª£ng: {cartItem.quantity}</p>
            </li>
          ))}
        </ul>
      ) : <p>Gi·ªè h√†ng c·ªßa b·∫°n tr·ªëng!</p>}
    </aside>
  ) : null;
}
```
</Fragment>
<Fragment slot="svelte">
```svelte
<!--src/components/CartFlyout.svelte-->
<script>
  import { isCartOpen, cartItems } from '../cartStore';
</script>

{#if $isCartOpen}
  {#if Object.values($cartItems).length}
    <aside>
      {#each Object.values($cartItems) as cartItem}
      <li>
        <img src={cartItem.imageSrc} alt={cartItem.name} />
        <h3>{cartItem.name}</h3>
        <p>S·ªë l∆∞·ª£ng: {cartItem.quantity}</p>
      </li>
      {/each}
    </aside>
  {:else}
    <p>Gi·ªè h√†ng c·ªßa b·∫°n tr·ªëng!</p>
  {/if}
{/if}
```
</Fragment>
<Fragment slot="vue">
```vue
<!--src/components/CartFlyout.vue-->
<template>
  <aside v-if="$isCartOpen">
    <ul v-if="Object.values($cartItems).length">
      <li v-for="cartItem in Object.values($cartItems)" :key="cartItem.id">
        <img :src="cartItem.imageSrc" :alt="cartItem.name" />
        <h3>{{ cartItem.name }}</h3>
        <p>S·ªë l∆∞·ª£ng: {{ cartItem.quantity }}</p>
      </li>
    </ul>
    <p v-else>Gi·ªè h√†ng c·ªßa b·∫°n tr·ªëng!</p>
  </aside>
</template>

<script setup>
  import { isCartOpen, cartItems } from '../cartStore';
  import { useStore } from '@nanostores/vue';

  const $isCartOpen = useStore(isCartOpen);
  const $cartItems = useStore(cartItems);
</script>
```
</Fragment>

</UIFrameworkTabs>

Now, you should have a fully interactive ecommerce example with the smallest JS bundle in the galaxy üöÄ

[**Try the completed example**](https://github.com/withastro/astro/tree/main/examples/with-nanostores) on your machine or online via StackBlitz!
