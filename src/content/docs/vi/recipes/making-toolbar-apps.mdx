---
title: Táº¡o má»™t á»©ng dá»¥ng thanh cÃ´ng cá»¥ dev
description: TÃ¬m hiá»ƒu cÃ¡ch táº¡o má»™t á»©ng dá»¥ng thanh cÃ´ng cá»¥ dev cho trang web cá»§a báº¡n.
type: recipe
i18nReady: true
---

import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'
import { FileTree } from '@astrojs/starlight/components';
import { Steps } from '@astrojs/starlight/components';
import ReadMore from '~/components/ReadMore.astro';

Astro bao gá»“m má»™t [thanh cÃ´ng cá»¥ phÃ¡t triá»ƒn](/vi/guides/dev-toolbar/) mÃ  báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng Ä‘á»ƒ kiá»ƒm tra trang web, kiá»ƒm tra cÃ¡c váº¥n Ä‘á» vá» kháº£ nÄƒng truy cáº­p vÃ  hiá»‡u suáº¥t, vÃ  nhiá»u hÆ¡n ná»¯a. Thanh cÃ´ng cá»¥ nÃ y cÃ²n cÃ³ thá»ƒ má»Ÿ rá»™ng vá»›i cÃ¡c á»©ng dá»¥ng tÃ¹y chá»‰nh.

## XÃ¢y dá»±ng má»™t á»©ng dá»¥ng thanh cÃ´ng cá»¥ dev truyá»n cáº£m há»©ng

Trong cÃ´ng thá»©c nÃ y, báº¡n sáº½ há»c cÃ¡ch táº¡o má»™t á»©ng dá»¥ng thanh cÃ´ng cá»¥ dev giÃºp báº¡n giá»¯ Ä‘á»™ng lá»±c khi lÃ m viá»‡c trÃªn trang web cá»§a mÃ¬nh. á»¨ng dá»¥ng nÃ y sáº½ hiá»ƒn thá»‹ má»™t thÃ´ng Ä‘iá»‡p truyá»n cáº£m há»©ng má»—i khi báº¡n báº­t nÃ³ lÃªn.

:::tip 
Muá»‘n báº¯t Ä‘áº§u nhanh? Khá»Ÿi Ä‘á»™ng á»©ng dá»¥ng cá»§a báº¡n báº±ng cÃ¡ch táº¡o má»™t dá»± Ã¡n Astro má»›i vá»›i máº«u `toolbar-app`.

<PackageManagerTabs>
  <Fragment slot="npm">
    ```shell
    npm create astro@latest -- --template toolbar-app
    ```
  </Fragment>
  <Fragment slot="pnpm">
    ```shell
    pnpm create astro -- --template toolbar-app
    ```
  </Fragment>
  <Fragment slot="yarn">
    ```shell
    yarn create astro -- --template toolbar-app
    ```
  </Fragment>
</PackageManagerTabs>

Hoáº·c, tiáº¿p tá»¥c Ä‘á»c Ä‘á»ƒ há»c cÃ¡ch xÃ¢y dá»±ng má»™t á»©ng dá»¥ng tá»« Ä‘áº§u.
:::

### Táº¡o Astro integration

CÃ¡c á»©ng dá»¥ng thanh cÃ´ng cá»¥ dev chá»‰ cÃ³ thá»ƒ Ä‘Æ°á»£c thÃªm vÃ o thÃ´ng qua [Astro Integrations](/vi/guides/integrations-guide/) sá»­ dá»¥ng [hook `astro:config:setup`](/vi/reference/integrations-reference/#astroconfigsetup). Báº¡n cáº§n táº¡o cáº£ á»©ng dá»¥ng thanh cÃ´ng cá»¥ vÃ  integration Ä‘á»ƒ thÃªm nÃ³ vÃ o thanh cÃ´ng cá»¥ cá»§a dá»± Ã¡n Astro hiá»‡n táº¡i.

<Steps>

1. á» thÆ° má»¥c gá»‘c cá»§a dá»± Ã¡n Astro hiá»‡n táº¡i, táº¡o má»™t thÆ° má»¥c má»›i tÃªn lÃ  `my-toolbar-app/` Ä‘á»ƒ chá»©a cÃ¡c file á»©ng dá»¥ng vÃ  integration. Táº¡o hai file má»›i trong thÆ° má»¥c nÃ y: `app.ts` vÃ  `my-integration.ts`.

    <FileTree>
    - **my-toolbar-app/**
      - **app.ts**
      - **my-integration.ts**
    - src/
      - pages/
      - ...
    - astro.config.mjs
    - package.json
    - tsconfig.json
    </FileTree>

2. Trong `my-integration.ts`, thÃªm Ä‘oáº¡n mÃ£ sau Ä‘á»ƒ cung cáº¥p tÃªn cá»§a integration cÅ©ng nhÆ° [hÃ m `addDevToolbarApp()`](/vi/reference/dev-toolbar-app-reference/#toolbar-app-integration-setup) cáº§n thiáº¿t Ä‘á»ƒ thÃªm á»©ng dá»¥ng dev toolbar thÃ´ng qua hook `astro:config:setup`:

    ```ts title="my-toolbar-app/my-integration.ts" "'astro:config:setup'" "hooks" "addDevToolbarApp"
    import { fileURLToPath } from 'node:url';
    import type { AstroIntegration } from 'astro';

    export default {
      name: 'my-astro-integration',
      hooks: {
        'astro:config:setup': ({ addDevToolbarApp }) => {  
          addDevToolbarApp({
            id: "my-toolbar-app",
            name: "My Toolbar App",
            icon: "ğŸš€",
            entrypoint: fileURLToPath(new URL('./app.ts', import.meta.url))
          });
        },
      },
    } satisfies AstroIntegration;
    ```


    :::note[Sá»­ dá»¥ng Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i Ä‘áº¿n entrypoint]
    `entrypoint` lÃ  Ä‘Æ°á»ng dáº«n Ä‘áº¿n file á»©ng dá»¥ng thanh cÃ´ng cá»¥ dev **tÃ­nh tá»« thÆ° má»¥c gá»‘c cá»§a dá»± Ã¡n Astro hiá»‡n táº¡i**, khÃ´ng pháº£i tÃ­nh tá»« thÆ° má»¥c integration (`my-toolbar-app`).

    Äá»ƒ sá»­ dá»¥ng Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i cho entrypoint, hÃ£y láº¥y Ä‘Æ°á»ng dáº«n Ä‘áº¿n file hiá»‡n táº¡i báº±ng `import.meta.url` vÃ  ná»‘i Ä‘Æ°á»ng dáº«n Ä‘áº¿n entrypoint tá»« Ä‘Ã³.
    :::

3. Äá»ƒ sá»­ dá»¥ng integration nÃ y trong dá»± Ã¡n, thÃªm nÃ³ vÃ o máº£ng `integrations` trong file `astro.config.mjs`.

    ```js title="astro.config.mjs" ins={2,5}
    import { defineConfig } from 'astro/config';
    import myIntegration from './my-toolbar-app/my-integration.ts';

    export default defineConfig({
      integrations: [myIntegration],
    })
    ```

4. Náº¿u chÆ°a cháº¡y, hÃ£y khá»Ÿi Ä‘á»™ng mÃ¡y chá»§ dev. Náº¿u integration Ä‘Ã£ Ä‘Æ°á»£c thÃªm thÃ nh cÃ´ng vÃ o dá»± Ã¡n, báº¡n sáº½ tháº¥y má»™t á»©ng dá»¥ng má»›i "undefined" xuáº¥t hiá»‡n trong thanh cÃ´ng cá»¥ dev.

    Tuy nhiÃªn, báº¡n cÅ©ng sáº½ tháº¥y thÃ´ng bÃ¡o lá»—i ráº±ng á»©ng dá»¥ng thanh cÃ´ng cá»¥ dev chÆ°a táº£i Ä‘Æ°á»£c. ÄÃ³ lÃ  vÃ¬ báº¡n chÆ°a xÃ¢y dá»±ng á»©ng dá»¥ng. Báº¡n sáº½ lÃ m Ä‘iá»u nÃ y á»Ÿ pháº§n tiáº¿p theo.

</Steps>

<ReadMore> Tham kháº£o thÃªm [tÃ i liá»‡u API Astro Integration](/vi/reference/integrations-reference/) Ä‘á»ƒ tÃ¬m hiá»ƒu thÃªm vá» cÃ¡ch xÃ¢y dá»±ng Astro integration.</ReadMore>

### Táº¡o á»©ng dá»¥ng

CÃ¡c á»©ng dá»¥ng thanh cÃ´ng cá»¥ dev Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a báº±ng hÃ m `defineToolbarApp()` tá»« module `astro/toolbar`. HÃ m nÃ y nháº­n má»™t object vá»›i hÃ m `init()` sáº½ Ä‘Æ°á»£c gá»i khi á»©ng dá»¥ng thanh cÃ´ng cá»¥ dev Ä‘Æ°á»£c táº£i.

HÃ m `init()` nÃ y chá»©a logic cá»§a á»©ng dá»¥ng Ä‘á»ƒ hiá»ƒn thá»‹ cÃ¡c pháº§n tá»­ lÃªn mÃ n hÃ¬nh, gá»­i vÃ  nháº­n sá»± kiá»‡n phÃ­a client tá»« thanh cÃ´ng cá»¥ dev, vÃ  giao tiáº¿p vá»›i server.

```ts title="app.ts"
import { defineToolbarApp } from "astro/toolbar";

export default defineToolbarApp({
    init(canvas, app, server) {
      // ...
    },
});
```

Äá»ƒ hiá»ƒn thá»‹ thÃ´ng Ä‘iá»‡p truyá»n cáº£m há»©ng lÃªn mÃ n hÃ¬nh, báº¡n sáº½ sá»­ dá»¥ng thuá»™c tÃ­nh `canvas` Ä‘á»ƒ truy cáº­p má»™t [ShadowRoot](https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot) tiÃªu chuáº©n. CÃ¡c pháº§n tá»­ cÃ³ thá»ƒ Ä‘Æ°á»£c táº¡o vÃ  thÃªm vÃ o ShadowRoot báº±ng cÃ¡c API DOM tiÃªu chuáº©n.  

<Steps>

1. Sao chÃ©p Ä‘oáº¡n mÃ£ sau vÃ o `my-toolbar-app/app.ts`. Äoáº¡n mÃ£ nÃ y cung cáº¥p danh sÃ¡ch cÃ¡c thÃ´ng Ä‘iá»‡p truyá»n cáº£m há»©ng vÃ  logic Ä‘á»ƒ táº¡o má»™t pháº§n tá»­ `<h1>` vá»›i ná»™i dung ngáº«u nhiÃªn:

    ```ts title="my-toolbar-app/app.ts" {3-8, 12-15}
    import { defineToolbarApp } from "astro/toolbar";

    const motivationalMessages = [
      "Báº¡n Ä‘ang lÃ m ráº¥t tá»‘t!",
      "Tiáº¿p tá»¥c phÃ¡t huy nhÃ©!",
      "Báº¡n tháº­t tuyá»‡t vá»i!",
      "Báº¡n lÃ  ngÃ´i sao!",
    ];

    export default defineToolbarApp({
        init(canvas) {
          const h1 = document.createElement('h1');
          h1.textContent = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];

          canvas.append(h1);
        },
    });
    ```

2. Khá»Ÿi Ä‘á»™ng mÃ¡y chá»§ dev náº¿u chÆ°a cháº¡y vÃ  báº­t á»©ng dá»¥ng trong thanh cÃ´ng cá»¥ dev. Náº¿u á»©ng dá»¥ng hoáº¡t Ä‘á»™ng thÃ nh cÃ´ng, báº¡n sáº½ tháº¥y má»™t thÃ´ng Ä‘iá»‡p truyá»n cáº£m há»©ng xuáº¥t hiá»‡n á»Ÿ gÃ³c trÃªn bÃªn trÃ¡i mÃ n hÃ¬nh. (VÃ  Ä‘Ã³ lÃ  sá»± tháº­t!)

    Tuy nhiÃªn, thÃ´ng Ä‘iá»‡p nÃ y sáº½ khÃ´ng thay Ä‘á»•i khi báº¡n báº­t/táº¯t á»©ng dá»¥ng, vÃ¬ hÃ m `init()` chá»‰ Ä‘Æ°á»£c gá»i má»™t láº§n khi á»©ng dá»¥ng Ä‘Æ°á»£c táº£i.

3. Äá»ƒ thÃªm tÃ­nh tÆ°Æ¡ng tÃ¡c phÃ­a client cho á»©ng dá»¥ng, thÃªm Ä‘á»‘i sá»‘ `app` vÃ  sá»­ dá»¥ng `onAppToggled()` Ä‘á»ƒ chá»n má»™t thÃ´ng Ä‘iá»‡p ngáº«u nhiÃªn má»—i láº§n báº¡n báº­t app trÃªn thanh cÃ´ng cá»¥:

    ```ts title="app.ts" ins=", app" ins={17-21}
    import { defineToolbarApp } from "astro/toolbar";

    const motivationalMessages = [
      "Báº¡n Ä‘ang lÃ m ráº¥t tá»‘t!",
      "Tiáº¿p tá»¥c phÃ¡t huy nhÃ©!",
      "Báº¡n tháº­t tuyá»‡t vá»i!",
      "Báº¡n lÃ  ngÃ´i sao!",
    ];

    export default defineToolbarApp({
        init(canvas, app) {
          const h1 = document.createElement('h1');
          h1.textContent = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];
          
          canvas.append(h1);

          // Hiá»ƒn thá»‹ thÃ´ng Ä‘iá»‡p ngáº«u nhiÃªn má»—i khi báº­t app
          app.onToggled(({ state }) => {
            const newMessage = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];
            h1.textContent = newMessage;
          });
        },
    });
    ```

4. Trong trÃ¬nh duyá»‡t, thá»­ báº­t/táº¯t app vÃ i láº§n. Vá»›i thay Ä‘á»•i nÃ y, má»™t thÃ´ng Ä‘iá»‡p ngáº«u nhiÃªn má»›i sáº½ Ä‘Æ°á»£c chá»n má»—i khi báº¡n báº­t app, mang láº¡i nguá»“n Ä‘á»™ng lá»±c vÃ´ táº­n cho báº¡n!

</Steps>

<ReadMore>Xem thÃªm [tÃ i liá»‡u API Dev Toolbar cá»§a Astro](/vi/reference/dev-toolbar-app-reference/) Ä‘á»ƒ tÃ¬m hiá»ƒu thÃªm vá» cÃ¡ch xÃ¢y dá»±ng á»©ng dá»¥ng dev toolbar.</ReadMore>

## XÃ¢y dá»±ng á»©ng dá»¥ng vá»›i UI framework

CÃ¡c framework UI nhÆ° React, Vue, hoáº·c Svelte cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡o á»©ng dá»¥ng thanh cÃ´ng cá»¥ dev. Nhá»¯ng framework nÃ y giÃºp viá»‡c xÃ¢y dá»±ng giao diá»‡n trá»Ÿ nÃªn khai bÃ¡o hÆ¡n, dá»… báº£o trÃ¬ vÃ  dá»… Ä‘á»c hÆ¡n.

á»¨ng dá»¥ng thanh cÃ´ng cá»¥ dev truyá»n cáº£m há»©ng vá»«a xÃ¢y dá»±ng báº±ng JavaScript á»Ÿ trÃªn cÅ©ng cÃ³ thá»ƒ Ä‘Æ°á»£c táº¡o báº±ng má»™t UI framework (vÃ­ dá»¥: Preact). TÃ¹y vÃ o framework báº¡n chá»n, báº¡n cÃ³ thá»ƒ sáº½ cáº§n hoáº·c khÃ´ng cáº§n bÆ°á»›c build.

:::note 
DÃ¹ báº¡n xÃ¢y dá»±ng á»©ng dá»¥ng thanh cÃ´ng cá»¥ dev báº±ng JavaScript hay UI framework, báº¡n váº«n cáº§n [táº¡o integration](#creating-the-astro-integration) Ä‘á»ƒ thÃªm á»©ng dá»¥ng vÃ o thanh cÃ´ng cá»¥ dev.
:::

### KhÃ´ng cáº§n bÆ°á»›c build

Náº¿u framework cá»§a báº¡n há»— trá»£, báº¡n cÃ³ thá»ƒ táº¡o á»©ng dá»¥ng thanh cÃ´ng cá»¥ dev mÃ  khÃ´ng cáº§n bÆ°á»›c build. VÃ­ dá»¥, báº¡n cÃ³ thá»ƒ dÃ¹ng hÃ m `h` cá»§a Preact Ä‘á»ƒ táº¡o cÃ¡c pháº§n tá»­ vÃ  render trá»±c tiáº¿p lÃªn ShadowRoot:

```ts title="app.ts"
import { defineToolbarApp } from "astro/toolbar";
import { render, h } from "preact";

const motivationalMessages = [
  "Báº¡n Ä‘ang lÃ m ráº¥t tá»‘t!",
  "Tiáº¿p tá»¥c phÃ¡t huy nhÃ©!",
  "Báº¡n tháº­t tuyá»‡t vá»i!",
  "Báº¡n lÃ  ngÃ´i sao!",
];

export default defineToolbarApp({
    init(canvas) {
      const message = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];
      render(h('h1', null, message), canvas);
    },
});
```

Hoáº·c, gÃ³i [`htm`](https://github.com/developit/htm) cÅ©ng lÃ  lá»±a chá»n tá»‘t Ä‘á»ƒ táº¡o á»©ng dá»¥ng thanh cÃ´ng cá»¥ dev mÃ  khÃ´ng cáº§n build, há»— trá»£ tÃ­ch há»£p gá»‘c cho React, Preact vÃ  cÃ¡c framework khÃ¡c:

```ts title="app.ts" ins={3, 15}
import { defineToolbarApp } from "astro/toolbar";
import { render } from "preact";
import { html } from 'htm/preact';

const motivationalMessages = [
  "Báº¡n Ä‘ang lÃ m ráº¥t tá»‘t!",
  "Tiáº¿p tá»¥c phÃ¡t huy nhÃ©!",
  "Báº¡n tháº­t tuyá»‡t vá»i!",
  "Báº¡n lÃ  ngÃ´i sao!",
];

export default defineToolbarApp({
    init(canvas) {
      const message = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];
      render(html`<h1>${message}</h1>`, canvas);
    },
});
```

DÃ¹ theo cÃ¡ch nÃ o, báº¡n cÅ©ng cÃ³ thá»ƒ khá»Ÿi Ä‘á»™ng dá»± Ã¡n vÃ  tháº¥y thÃ´ng Ä‘iá»‡p truyá»n cáº£m há»©ng hiá»ƒn thá»‹ á»Ÿ gÃ³c trÃªn bÃªn trÃ¡i mÃ n hÃ¬nh khi báº­t app.

### CÃ³ bÆ°á»›c build

Astro khÃ´ng xá»­ lÃ½ trÆ°á»›c mÃ£ JSX trong cÃ¡c á»©ng dá»¥ng thanh cÃ´ng cá»¥ dev, vÃ¬ váº­y báº¡n cáº§n bÆ°á»›c build Ä‘á»ƒ sá»­ dá»¥ng JSX.

CÃ¡c bÆ°á»›c dÆ°á»›i Ä‘Ã¢y sá»­ dá»¥ng TypeScript, nhÆ°ng cÃ¡c cÃ´ng cá»¥ khÃ¡c nhÆ° Babel, Rollup, ESBuild cÅ©ng Ä‘á»u phÃ¹ há»£p.

<Steps>
1. CÃ i Ä‘áº·t TypeScript vÃ o dá»± Ã¡n:

    <PackageManagerTabs>
      <Fragment slot="npm">
        ```shell
        npm install --save-dev typescript
        ```
      </Fragment>
      <Fragment slot="pnpm">
        ```shell
        pnpm install --save-dev typescript
        ```
      </Fragment>
      <Fragment slot="yarn">
        ```shell
        yarn add --dev typescript
        ```
      </Fragment>
    </PackageManagerTabs>

2. Táº¡o file `tsconfig.json` á»Ÿ thÆ° má»¥c gá»‘c cá»§a thÆ° má»¥c á»©ng dá»¥ng toolbar vá»›i cÃ¡c thiáº¿t láº­p phÃ¹ há»£p vá»›i framework báº¡n sá»­ dá»¥ng ([React](https://react-typescript-cheatsheet.netlify.app/docs/basic/setup), [Preact](https://preactjs.com/guide/v10/typescript), [Solid](https://www.solidjs.com/guides/typescript)). VÃ­ dá»¥ cho Preact:

    ```json title="my-toolbar-app/tsconfig.json"
    {
      "compilerOptions": {
        "skipLibCheck": true,
        "module": "NodeNext",
        "jsx": "react-jsx",
        "jsxImportSource": "preact",
      }
    }
    ```

3. Äiá»u chá»‰nh trÆ°á»ng `entrypoint` trong integration Ä‘á»ƒ trá» Ä‘áº¿n file Ä‘Ã£ biÃªn dá»‹ch, lÆ°u Ã½ ráº±ng Ä‘Æ°á»ng dáº«n nÃ y lÃ  tÃ­nh tá»« gá»‘c dá»± Ã¡n Astro:

    ```ts title="my-integration.ts" ins="app.js"
    addDevToolbarApp({
      id: "my-toolbar-app",
      name: "My Toolbar App",
      icon: "ğŸš€",
      entrypoint: join(__dirname, "./app.js"),
    });
    ```

4. Cháº¡y `tsc` Ä‘á»ƒ build á»©ng dá»¥ng thanh cÃ´ng cá»¥ dev, hoáº·c `tsc --watch` Ä‘á»ƒ tá»± Ä‘á»™ng build láº¡i khi cÃ³ thay Ä‘á»•i.

      BÃ¢y giá», báº¡n cÃ³ thá»ƒ Ä‘á»•i tÃªn file `app.ts` thÃ nh `app.tsx` (hoáº·c `.jsx`) vÃ  sá»­ dá»¥ng cÃº phÃ¡p JSX Ä‘á»ƒ xÃ¢y dá»±ng á»©ng dá»¥ng:

      ```tsx title="app.tsx"
      import { defineToolbarApp } from "astro/toolbar";
      import { render } from "preact";

      const motivationalMessages = [
        "Báº¡n Ä‘ang lÃ m ráº¥t tá»‘t!",
        "Tiáº¿p tá»¥c phÃ¡t huy nhÃ©!",
        "Báº¡n tháº­t tuyá»‡t vá»i!",
        "Báº¡n lÃ  ngÃ´i sao!",
      ];

      export default defineToolbarApp({
          init(canvas) {
            const message = motivationalMessages[Math.floor(Math.random() * motivationalMessages.length)];
            render(<h1>{message}</h1>, canvas);
          },
      });
      ```
</Steps>

BÃ¢y giá» báº¡n Ä‘Ã£ cÃ³ Ä‘áº§y Ä‘á»§ cÃ´ng cá»¥ Ä‘á»ƒ táº¡o á»©ng dá»¥ng thanh cÃ´ng cá»¥ dev vá»›i báº¥t ká»³ UI framework nÃ o báº¡n muá»‘n!